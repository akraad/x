<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ابزارک‌های هوشمند</title>
    
    
<link href="https://cdn.fontcdn.ir/Font/Persian/Shabnam/Shabnam.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        body {
            font-family: 'Shabnam', 'Vazirmatn', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- Modern Minimal Grey Navbar Styles with Colored Borders --- */
        .navbar {
            display: flex;
            justify-content: center;
            background-color: #f8f8f8; /* Light grey background */
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            padding: 10px 15px;
            margin-bottom: 25px;
            width: 100%;
            max-width: 900px;
            flex-wrap: wrap;
            gap: 8px;
            border: 1px solid #e0e0e0; /* Subtle border */
        }
        .nav-button {
            background-color: #ececec; /* Slightly darker grey for buttons */
            color: #555; /* Dark grey text */
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-grow: 1;
            min-width: 120px;
            max-width: 180px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            position: relative; /* For the colored border */
            overflow: hidden; /* To keep the pseudo-element within bounds */
        }
        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px; /* Thickness of the colored border */
            background-color: transparent; /* Default transparent */
            transition: background-color 0.3s ease;
        }

        /* Specific colors for each button */
        .nav-button[data-color="gold"]::before { background-color: #FFD700; } /* Gold */
        .nav-button[data-color="green"]::before { background-color: #28a745; } /* Green */
        .nav-button[data-color="orange"]::before { background-color: #FFA500; } /* Orange */
        .nav-button[data-color="purple"]::before { background-color: #800080; } /* Purple */
        .nav-button[data-color="blue"]::before { background-color: #1e90ff; } /* Blue */
        .nav-button[data-color="red"]::before { background-color: #dc3545; } /* Red for new calculator */


        .nav-button:hover {
            background-color: #e0e0e0; /* Even darker grey on hover */
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
            color: #333; /* Darker text on hover */
        }
        .nav-button.active {
            background-color: #d0d0d0; /* Active state, darker grey */
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18), inset 0 0 8px rgba(0, 0, 0, 0.1);
            transform: translateY(0);
            color: #222; /* Even darker text for active */
        }
        .nav-button i {
            margin-left: 8px;
            font-size: 1em;
            color: #777; /* Icon color */
        }
        .nav-button.active i {
            color: #333; /* Icon color when active */
        }

        /* --- Common Form Styles (Minimal & Classic) --- */
        .app-container {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.07);
            padding: 25px;
            width: 100%;
            max-width: 420px; /* Slightly wider for new tools */
            text-align: center;
            border: 1px solid #e0e0e0;
            display: none; /* Initially hidden */
            transition: all 0.3s ease-in-out;
        }
        .app-container h1 {
            margin-bottom: 20px;
            font-size: 1.7em;
            font-weight: 700;
            color: #444;
        }
        .input-group {
            margin-bottom: 15px;
            text-align: right;
            position: relative;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            color: #555;
        }
        .input-group input[type="number"],
        .input-group input[type="text"],
        .input-group select {
            width: calc(100% - 35px);
            padding: 10px 10px 10px 30px;
            border: 1px solid #bbb;
            border-radius: 5px;
            font-size: 0.9em;
            direction: ltr; /* Default for inputs */
            text-align: right;
            transition: border-color 0.2s;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=UTF8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>');
            background-repeat: no-repeat;
            background-position: left 8px center;
            background-size: 14px;
            padding-left: 35px;
        }

        .input-group select {
            width: calc(100% - 15px);
            padding-left: 8px;
            direction: rtl; /* For Persian text in select */
            background-position: left 8px center;
            background-size: 14px;
            cursor: pointer;
        }
        .input-group select option {
            padding: 5px;
        }

        .input-group input[type="number"]:focus,
        .input-group input[type="text"]:focus,
        .input-group select:focus {
            outline: none;
            border-color: #007bff;
        }
        .input-group .icon {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(calc(-50% + 8px));
            color: #888;
            font-size: 1em;
        }
        .input-group small {
            display: block;
            margin-top: 3px;
            color: #888;
            font-size: 0.75em;
            text-align: right;
        }
        .flex-inputs { /* General class for flexboxed input groups */
            display: flex;
            gap: 8px;
            align-items: flex-end; /* Aligns items to the bottom */
        }
        .flex-inputs .input-group {
            flex: 1;
            margin-bottom: 0;
        }
        .flex-inputs .input-group label {
            white-space: nowrap; /* Prevents label from wrapping */
        }
        .app-container button {
            color: white;
            padding: 10px 18px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s ease;
            width: 100%;
            font-weight: 600;
            margin-top: 18px;
        }
        .app-container button:hover {
            opacity: 0.9;
        }
        .result {
            margin-top: 20px;
            background-color: #f8f8f8;
            border: 1px solid #e8e8e8;
            border-radius: 7px;
            padding: 16px;
            font-size: 1.1em;
            color: #333;
            font-weight: 600;
            display: none;
            text-align: right;
            line-height: 1.6;
        }
        .result div {
            margin-bottom: 6px;
        }
        .result span {
            font-size: 0.95em;
            margin-right: 5px;
            font-weight: 700;
        }
        .personality-text {
            font-size: 1.05em;
            font-weight: normal;
            margin-top: 15px;
            text-align: justify;
            background-color: #fdfdfd;
            border: 1px dashed #ddd;
            padding: 15px;
            border-radius: 8px;
            color: #444;
        }
        .comparison-section {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px dashed #eee;
            text-align: right;
        }
        .comparison-section label {
            font-size: 0.9em;
            color: #555;
            display: block;
            margin-bottom: 10px;
        }
        .comparison-section select {
            width: calc(100% - 15px);
            padding: 9px 9px 9px 8px;
            border: 1px solid #bbb;
            border-radius: 5px;
            font-size: 0.9em;
            direction: rtl;
            background-position: left 8px center;
            background-size: 14px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .comparison-section button {
            margin-top: 10px;
            background-color: #007bff;
        }
        .comparison-result {
            margin-top: 15px;
            background-color: #f9f9f9;
            border: 1px solid #e9e9e9;
            border-radius: 7px;
            padding: 15px;
            text-align: right;
        }
        .comparison-result h3 {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }
        .comparison-result p {
            font-size: 0.95em;
            line-height: 1.6;
            color: #555;
            margin-bottom: 8px;
        }
        .positive-point {
            color: #28a745;
            font-weight: 600;
            margin-bottom: 5px;
        }
        .negative-point {
            color: #dc3545;
            font-weight: 600;
            margin-bottom: 5px;
        }

        /* --- Loan/Deposit Calculator Specific Styles --- */
        .tab-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .tab-button {
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 0.9em;
            border-radius: 5px 5px 0 0;
            margin: 0 2px;
            transition: all 0.2s ease;
            color: #555;
        }
        .tab-button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .loan-deposit-content {
            display: none;
        }
         .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            background-color: #f0f0f0;
            border-radius: 5px;
            padding: 8px 12px;
            border: 1px solid #ddd;
        }
        .toggle-switch span {
            font-size: 0.9em;
            color: #555;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 22px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 22px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #2196F3;
        }
        input:focus + .slider {
            box-shadow: 0 0 1px #2196F3;
        }
        input:checked + .slider:before {
            -webkit-transform: translateX(18px);
            -ms-transform: translateX(18px);
            transform: translateX(18px);
        }


        /* --- Specific Form Colors --- */

        /* Gold Calculator */
        #goldCalculator { border-color: #e0e0e0; }
        #goldCalculator h1 { color: #b8860b; }
        #goldCalculator .input-group input:focus { border-color: #b8860b; }
        #goldCalculator button { background-color: #b8860b; }
        #goldCalculator .result span { color: #b8860b; }

        /* BMI Calculator */
        #bmiCalculator { border-color: #d1e7dd; }
        #bmiCalculator h1 { color: #28a745; }
        #bmiCalculator .input-group input:focus { border-color: #28a745; }
        #bmiCalculator button { background-color: #28a745; }
        #bmiCalculator .result span { color: #28a745; }

        /* Personality Test */
        #personalityTest { border-color: #ffe0b3; }
        #personalityTest h1 { color: #d68910; }
        #personalityTest .input-group input:focus,
        #personalityTest .input-group select:focus { border-color: #d68910; }
        #personalityTest button { background-color: #d68910; }
        #personalityTest .result span { color: #d68910; }
        #personalityTest .comparison-section button { background-color: #007bff; }

        /* Loan/Deposit Calculator */
        #loanDepositCalculator { border-color: #d8bfd8; }
        #loanDepositCalculator h1 { color: #800080; } /* Purple */
        #loanDepositCalculator .input-group input:focus,
        #loanDepositCalculator .input-group select:focus { border-color: #800080; }
        #loanDepositCalculator button { background-color: #800080; }
        #loanDepositCalculator .result span { color: #800080; }
        #loanDepositCalculator .tab-button.active { background-color: #800080; border-color: #800080; }


        /* Currency Converter */
        #currencyConverter { border-color: #cfe2f3; }
        #currencyConverter h1 { color: #1e90ff; } /* Dodger Blue */
        #currencyConverter .input-group input:focus,
        #currencyConverter .input-group select:focus { border-color: #1e90ff; }
        #currencyConverter button { background-color: #1e90ff; }
        #currencyConverter .result span { color: #1e90ff; }

        /* Hypothetical Services Calculator */
        #hypotheticalServicesCalculator { border-color: #f8d7da; } /* Light red border */
        #hypotheticalServicesCalculator h1 { color: #dc3545; } /* Red */
        #hypotheticalServicesCalculator .input-group input:focus { border-color: #dc3545; }
        #hypotheticalServicesCalculator button { background-color: #dc3545; }
        #hypotheticalServicesCalculator .result span { color: #dc3545; }
        #hypotheticalServicesCalculator .disclaimer {
            font-size: 0.8em;
            color: #888;
            margin-top: 15px;
            text-align: justify;
            border-top: 1px dashed #eee;
            padding-top: 10px;
        }
        #hypotheticalServicesCalculator ul {
            text-align: right;
            list-style-type: disc;
            padding-right: 20px;
            margin-top: 10px;
            color: #555;
            font-size: 0.9em;
        }
        #hypotheticalServicesCalculator li {
            margin-bottom: 5px;
        }
        #hypotheticalServicesCalculator .category-item {
            font-weight: bold;
            color: #333;
        }
        #hypotheticalServicesCalculator .category-range {
            font-size: 0.85em;
            color: #777;
            margin-right: 5px;
        }


        /* Media Queries for Responsiveness */
        @media (max-width: 768px) {
            .navbar {
                padding: 8px;
                max-width: 100%;
            }
            .nav-button {
                margin: 4px;
                flex-basis: 45%; /* Two buttons per row */
                min-width: unset;
                font-size: 0.8em;
                padding: 8px 12px;
            }
            .app-container {
                padding: 18px;
                max-width: 340px;
            }
            .input-group input[type="number"],
            .input-group input[type="text"],
            .input-group select {
                width: calc(100% - 25px);
                padding: 7px 7px 7px 25px;
            }
            .input-group .icon {
                left: 6px;
                font-size: 0.9em;
                transform: translateY(calc(-50% + 7px));
            }
            .input-group select {
                padding-left: 6px;
            }
            .personality-text {
                font-size: 0.95em;
                padding: 12px;
            }
            .tab-button {
                font-size: 0.85em;
                padding: 6px 10px;
            }
        }

        @media (max-width: 480px) {
            .nav-button {
                flex-basis: 100%; /* One button per row on very small screens */
            }
            .flex-inputs {
                flex-direction: column;
                gap: 15px;
            }
            .flex-inputs .input-group {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    
<div class="navbar">
        <button class="nav-button" data-color="gold" onclick="showSection('goldCalculator', this)"><i class="fas fa-gem"></i> قیمت طلا</button>
        <button class="nav-button" data-color="green" onclick="showSection('bmiCalculator', this)"><i class="fas fa-calculator"></i> شاخص وزن</button>
        <button class="nav-button" data-color="orange" onclick="showSection('personalityTest', this)"><i class="fas fa-brain"></i> تست شخصیت</button>
        <button class="nav-button" data-color="purple" onclick="showSection('loanDepositCalculator', this)"><i class="fas fa-university"></i> سود/وام</button>
        <button class="nav-button" data-color="blue" onclick="showSection('currencyConverter', this)"><i class="fas fa-exchange-alt"></i> مبدل ارز</button>
        <button class="nav-button" data-color="red" onclick="showSection('hypotheticalServicesCalculator', this)"><i class="fas fa-money-bill-wave"></i> شاخص روسپی</button>
    </div>

    
<div id="goldCalculator" class="app-container">
        <h1><i class="fas fa-gem" style="margin-left: 10px;"></i>محاسبه‌گر هوشمند طلا</h1>
        
        <div class="input-group">
            <label for="goldPriceToman">قیمت روز طلا (تومان در گرم):</label>
            <input type="number" id="goldPriceToman" placeholder="مثال: 3,200,000" min="0">
            <i class="fas fa-coins icon"></i>
        </div>

        <div class="input-group">
            <label for="usdExchangeRate">نرخ برابری دلار به تومان:</label>
            <input type="number" id="usdExchangeRate" placeholder="مثال: 60000" min="1000">
            <i class="fas fa-dollar-sign icon"></i>
            <small>نرخ هر دلار چند تومان است.</small>
        </div>

        <div class="input-group">
            <label>وزن طلا:</label>
            <div class="flex-inputs">
                <div class="input-group">
                    <input type="number" id="goldWeightGram" placeholder="گرم" min="0" step="any">
                    <i class="fas fa-weight-hanging icon"></i>
                </div>
                <div class="input-group">
                    <input type="number" id="goldWeightSoot" placeholder="سوت (تا 999)" min="0" max="999" step="any">
                    <i class="fas fa-balance-scale icon"></i>
                </div>
            </div>
            <small>هر گرم ۱۰۰۰ سوت است. می‌توانید فقط گرم یا سوت را وارد کنید.</small>
        </div>
        
        <div class="input-group">
            <label for="wagePercent">درصد اجرت کار (اختیاری):</label>
            <input type="number" id="wagePercent" placeholder="مثال: 20 (فقط عدد)" min="0" max="100">
            <i class="fas fa-percent icon"></i>
            <small>اگر اجرت ندارد، این فیلد را خالی بگذارید یا ۰ وارد کنید.</small>
        </div>
        
        <button onclick="calculateGoldPrice()">محاسبه قیمت</button>
        
        <div class="result" id="goldResultDiv">
            <div><span>قیمت نهایی:</span> <span id="finalPriceToman"></span> تومان</div>
            <div><span>قیمت نهایی:</span> <span id="finalPriceDollar"></span> دلار</div>
        </div>
    </div>

    
<div id="bmiCalculator" class="app-container">
        <h1><i class="fas fa-calculator" style="margin-left: 10px;"></i>محاسبه شاخص توده بدنی (BMI)</h1>
        
        <div class="input-group">
            <label for="weight">وزن (کیلوگرم):</label>
            <input type="number" id="weight" placeholder="مثال: 70" min="1" step="any">
            <i class="fas fa-weight icon"></i>
        </div>
        
        <div class="input-group">
            <label for="height">قد (متر):</label>
            <input type="number" id="height" placeholder="مثال: 1.75" min="0.1" step="0.01">
            <i class="fas fa-ruler-vertical icon"></i>
            <small>مثال: ۱۷۵ سانتی‌متر را ۱.۷۵ متر وارد کنید.</small>
        </div>
        
        <button onclick="calculateBMI()">محاسبه BMI</button>
        
        <div class="result" id="bmiResultDiv">
            <div><span>شاخص BMI شما:</span> <span id="bmiValue"></span></div>
            <div><span>وضعیت:</span> <span id="bmiStatus"></span></div>
        </div>
    </div>

    
<div id="personalityTest" class="app-container">
        <h1><i class="fas fa-brain" style="margin-left: 10px;"></i>تست شخصیت‌شناسی</h1>

        <div class="input-group">
            <label for="userBirthMonth">ماه تولد شما:</label>
            <select id="userBirthMonth"></select>
            <i class="fas fa-calendar-star icon"></i>
        </div>

        <div class="input-group">
            <label for="userGender">جنسیت شما:</label>
            <select id="userGender">
                <option value="">انتخاب کنید</option>
                <option value="مرد">مرد</option>
                <option value="زن">زن</option>
                <option value="دیگر">دیگر</option>
            </select>
            <i class="fas fa-venus-mars icon"></i>
        </div>

        <button onclick="analyzePersonality()">تحلیل شخصیت</button>

        <div class="result" id="personalityResultDiv">
            <div class="personality-text" id="personalityText"></div>
            <div class="comparison-section">
                <label for="compareMonth">مقایسه با متولدین ماه:</label>
                <select id="compareMonth"></select>
                <button onclick="comparePersonalities()">مقایسه شخصیت‌ها</button>
                <div class="result comparison-result" id="comparisonResultDiv">
                    <div id="comparisonText"></div>
                </div>
            </div>
        </div>
    </div>

    
<div id="loanDepositCalculator" class="app-container">
        <h1><i class="fas fa-university" style="margin-left: 10px;"></i>محاسبه‌گر بانکی</h1>
        
        <div class="tab-buttons">
            <button class="tab-button active" onclick="showLoanDepositTab('deposit', this)">سود سپرده</button>
            <button class="tab-button" onclick="showLoanDepositTab('loan', this)">اقساط وام</button>
        </div>

        
<div id="depositContent" class="loan-deposit-content" style="display: block;">
            <div class="input-group">
                <label for="depositAmount">مبلغ سپرده (تومان):</label>
                <input type="number" id="depositAmount" placeholder="مثال: 100,000,000" min="0">
                <i class="fas fa-money-bill-wave icon"></i>
            </div>
            <div class="input-group">
                <label for="depositInterestRate">نرخ سود سالانه (درصد):</label>
                <input type="number" id="depositInterestRate" placeholder="مثال: 18" min="0" max="100" step="0.1">
                <i class="fas fa-percent icon"></i>
            </div>

            <div class="toggle-switch">
                <span>محاسبه سود روزشمار؟</span>
                <label class="switch">
                    <input type="checkbox" id="dailyInterestToggle">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="input-group">
                <label for="depositDurationDays" id="depositDurationLabel">مدت زمان سپرده (ماه):</label>
                <input type="number" id="depositDurationDays" placeholder="مثال: 12" min="1">
                <i class="fas fa-calendar-alt icon"></i>
            </div>

            <button onclick="calculateDepositInterest()">محاسبه سود سپرده</button>
            <div class="result" id="depositResultDiv">
                <div><span>سود کل:</span> <span id="totalDepositInterest"></span> تومان</div>
                <div><span>مبلغ نهایی با سود:</span> <span id="finalDepositAmount"></span> تومان</div>
            </div>
        </div>

        
<div id="loanContent" class="loan-deposit-content">
            <div class="input-group">
                <label for="loanAmount">مبلغ وام (تومان):</label>
                <input type="number" id="loanAmount" placeholder="مثال: 50,000,000" min="0">
                <i class="fas fa-money-check-alt icon"></i>
            </div>
            <div class="input-group">
                <label for="loanInterestRate">نرخ سود سالانه (درصد):</label>
                <input type="number" id="loanInterestRate" placeholder="مثال: 23" min="0" max="100" step="0.1">
                <i class="fas fa-percent icon"></i>
            </div>
            <div class="input-group">
                <label for="loanDurationMonths">مدت بازپرداخت (ماه):</label>
                <input type="number" id="loanDurationMonths" placeholder="مثال: 60" min="1">
                <i class="fas fa-calendar-check icon"></i>
            </div>
            <button onclick="calculateLoanInstallment()">محاسبه اقساط وام</button>
            <div class="result" id="loanResultDiv">
                <div><span>مبلغ هر قسط:</span> <span id="monthlyInstallment"></span> تومان</div>
                <div><span>کل سود پرداختی:</span> <span id="totalLoanInterest"></span> تومان</div>
                <div><span>مجموع پرداختی:</span> <span id="totalPayment"></span> تومان</div>
            </div>
        </div>
    </div>

    
<div id="currencyConverter" class="app-container">
        <h1><i class="fas fa-exchange-alt" style="margin-left: 10px;"></i>مبدل ارز</h1>
        
        <div class="input-group">
            <label for="amountToConvert">مبلغ:</label>
            <input type="number" id="amountToConvert" placeholder="مثال: 100" min="0">
            <i class="fas fa-money-bill-wave icon"></i>
        </div>
        
        <div class="input-group">
            <label for="fromCurrency">از واحد:</label>
            <select id="fromCurrency"></select>
            <i class="fas fa-chevron-circle-down icon"></i>
        </div>

        <div class="input-group">
            <label for="toCurrency">به واحد:</label>
            <select id="toCurrency"></select>
            <i class="fas fa-chevron-circle-down icon"></i>
        </div>

        <div class="input-group" id="exchangeRateInputGroup">
            <label for="exchangeRate">نرخ تبدیل (1 <span id="fromCurrencySymbol"></span> = ? <span id="toCurrencySymbol"></span>):</label>
            <input type="number" id="exchangeRate" placeholder="مثال: 60000 (برای دلار به تومان)" min="0" step="any">
            <i class="fas fa-coins icon"></i>
            <small>نرخ تبدیل ارز مبدأ به ارز مقصد را وارد کنید.</small>
        </div>
        
        <button onclick="convertCurrency()">تبدیل ارز</button>
        
        <div class="result" id="currencyResultDiv">
            <div><span>مبلغ تبدیل شده:</span> <span id="convertedAmount"></span></div>
        </div>
    </div>

    
<div id="hypotheticalServicesCalculator" class="app-container">
        <h1><i class="fas fa-money-bill-wave" style="margin-left: 10px;"></i>شاخص روسپی</h1>
        <div class="disclaimer">
            <p><strong>توجه:</strong> این ابزار صرفاً یک **نمونه کد و برای هدف آموزشی و نمایشی** است و به هیچ عنوان ترویج‌کننده یا تسهیل‌کننده فعالیت‌های غیرقانونی یا غیراخلاقی نیست. تمامی قیمت‌ها و دسته‌بندی‌ها کاملاً **فرضی و غیرواقعی** هستند و بر اساس هیچ داده حقیقی یا توصیه‌ای نیستند. هدف آن **کمک به درک فرضی مقیاس هزینه‌ها برای مدیریت بودجه ماهیانه** است.</p>
        </div>
        
        <div class="input-group">
            <label for="dollarExchangeRateHypothetical">نرخ روز دلار به تومان:</label>
            <input type="number" id="dollarExchangeRateHypothetical" placeholder="مثال: 60000" min="1000">
            <i class="fas fa-dollar-sign icon"></i>
            <small>نرخ هر دلار چند تومان است.</small>
        </div>

        <div class="input-group">
            <label for="hypotheticalBudget">مبلغ ماهیانه فرضی مورد نظر (تومان):</label>
            <input type="number" id="hypotheticalBudget" placeholder="مثال: 5,000,000" min="0">
            <i class="fas fa-coins icon"></i>
        </div>
        
        <button onclick="calculateHypotheticalServices()">محاسبه</button>
        
        <div class="result" id="hypotheticalServicesResultDiv">
            <div><span>با مبلغ ماهیانه فرضی شما، ممکن است بتوانید از دسته‌بندی‌های زیر (کاملاً فرضی) استفاده کنید:</span></div>
            <ul id="affordableCategories"></ul>
            <div><span>دسته‌بندی‌هایی که ممکن است خارج از محدوده باشند:</span></div>
            <ul id="unaffordableCategories"></ul>
        </div>
    </div>
    
    <script>
        // --- Navigation Logic ---
        function showSection(sectionId, clickedButton) {
            // Hide all app containers
            document.querySelectorAll('.app-container').forEach(section => {
                section.style.display = 'none';
            });
            // Remove 'active' class from all nav buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show the selected app container
            document.getElementById(sectionId).style.display = 'block';
            // Add 'active' class to the clicked button
            clickedButton.classList.add('active');

            // Reset results when switching sections
            document.querySelectorAll('.result').forEach(resultDiv => {
                resultDiv.style.display = 'none';
            });
            // Specific reset for comparison section in personality test
            document.getElementById('comparisonResultDiv').style.display = 'none';

            // Special handling for specific sections on display
            if (sectionId === 'personalityTest') {
                populatePersonalityMonths();
                populateCompareMonths();
            } else if (sectionId === 'loanDepositCalculator') {
                // Ensure default tab (deposit) is active and shown
                showLoanDepositTab('deposit', document.querySelector('#loanDepositCalculator .tab-buttons .tab-button:first-child'));
            } else if (sectionId === 'currencyConverter') {
                populateCurrencies();
                updateExchangeRateLabels(); // Ensure initial label update
            }
        }

        // --- Gold Calculator Logic ---
        function calculateGoldPrice() {
            const goldPricePerGramToman = parseFloat(document.getElementById('goldPriceToman').value);
            const usdExchangeRate = parseFloat(document.getElementById('usdExchangeRate').value);
            const goldWeightGram = parseFloat(document.getElementById('goldWeightGram').value || 0);
            const goldWeightSoot = parseFloat(document.getElementById('goldWeightSoot').value || 0);
            const wagePercent = parseFloat(document.getElementById('wagePercent').value || 0);

            if (isNaN(goldPricePerGramToman) || goldPricePerGramToman <= 0) {
                alert('لطفاً قیمت روز طلا را به درستی وارد کنید.');
                return;
            }
            if (isNaN(usdExchangeRate) || usdExchangeRate <= 0) {
                alert('لطفاً نرخ برابری دلار را به درستی وارد کنید.');
                return;
            }

            const totalWeightGram = goldWeightGram + (goldWeightSoot / 1000);

            if (totalWeightGram <= 0) {
                 alert('لطفاً وزن طلا را وارد کنید.');
                 return;
            }

            let wageAmountToman = (goldPricePerGramToman * (wagePercent / 100)) * totalWeightGram;
            const profitAmountToman = (goldPricePerGramToman * 0.07) * totalWeightGram;
            const taxAmountToman = (wageAmountToman + profitAmountToman) * 0.10;
            const rawGoldPriceToman = goldPricePerGramToman * totalWeightGram;
            const finalPriceToman = rawGoldPriceToman + wageAmountToman + profitAmountToman + taxAmountToman;
            const finalPriceDollar = finalPriceToman / usdExchangeRate;

            document.getElementById('finalPriceToman').innerText = finalPriceToman.toLocaleString('fa-IR');
            document.getElementById('finalPriceDollar').innerText = finalPriceDollar.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById('goldResultDiv').style.display = 'block';
        }

        // --- BMI Calculator Logic ---
        function calculateBMI() {
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);

            if (isNaN(weight) || weight <= 0) {
                alert('لطفاً وزن را به درستی وارد کنید.');
                return;
            }
            if (isNaN(height) || height <= 0) {
                alert('لطفاً قد را به درستی وارد کنید.');
                return;
            }

            const bmi = weight / (height * height);
            let status = '';

            if (bmi < 18.5) {
                status = 'کم‌وزنی';
            } else if (bmi >= 18.5 && bmi <= 24.9) {
                status = 'وزن نرمال';
            } else if (bmi >= 25 && bmi <= 29.9) {
                status = 'اضافه‌وزن';
            } else if (bmi >= 30 && bmi <= 34.9) {
                status = 'چاقی (درجه ۱)';
            } else if (bmi >= 35 && bmi <= 39.9) {
                status = 'چاقی شدید (درجه ۲)';
            } else {
                status = 'چاقی مفرط (درجه ۳)';
            }

            document.getElementById('bmiValue').innerText = bmi.toLocaleString('fa-IR', { minimumFractionDigits: 1, maximumFractionDigits: 1 });
            document.getElementById('bmiStatus').innerText = status;
            document.getElementById('bmiResultDiv').style.display = 'block';
        }

        // --- Personality Test Logic ---
        const solarMonths = [
            { value: 'فروردین', text: 'فروردین (حمل)' }, { value: 'اردیبهشت', text: 'اردیبهشت (ثور)' },
            { value: 'خرداد', text: 'خرداد (جوزا)' }, { value: 'تیر', text: 'تیر (سرطان)' },
            { value: 'مرداد', text: 'مرداد (اسد)' }, { value: 'شهریور', text: 'شهریور (سنبله)' },
            { value: 'مهر', text: 'مهر (میزان)' }, { value: 'آبان', text: 'آبان (عقرب)' },
            { value: 'آذر', text: 'آذر (قوس)' }, { value: 'دی', text: 'دی (جدی)' },
            { value: 'بهمن', text: 'بهمن (دلو)' }, { value: 'اسفند', text: 'اسفند (حوت)' }
        ];

        const personalityTraits = {
            'فروردین': {
                'نقاط قوت': ["انرژی بالا و شروعکنندهی پروژهها", "خلاق و ایدهپرداز", "اجتماعی و خوشمشرب", "خوشبین و امیدوار", "کنجکاو و علاقهمند به یادگیری", "رها و آزاداندیش"],
                'نقاط ضعف': ["ممکن است زود از پروژهها خسته شوید", "بینظم و نامرتب", "روابطتان گاهی سطحی میماند", "عجول و کمحوصله", "گاهی بیش از حد خوشبین و غیرواقعبین", "مسئولیتگریز"]
            },
            'اردیبهشت': {
                'نقاط قوت': ["منظم و برنامهریز", "وفادار و قابل اعتماد", "صبور و با حوصله", "واقعبین و عملگرا", "سختکوش و پرتلاش", "محافظهکار و ریسکگریز"],
                'نقاط ضعف': ["گاهی بیش از حد سختگیر", "مقاوم در برابر تغییر", "ممکن است مادیگرا باشید", "کینهتوزی در صورت آسیب دیدن", "گاهی خشک و بیاحساس", "انعطافناپذیر"]
            },
            'خرداد': {
                'نقاط قوت': ["کنجکاو و دانشجو", "سازگار و انعطافپذیر", "شوخطبع و سرزنده", "همدل و دلسوز", "اجتماعی و خونگرم", "خوشبین و مثبتاندیش"],
                'نقاط ضعف': ["پرحرف و گاهی یکطرفه", "بیقرار و کمتحمل", "سطحینگر و کمعمق", "فراموشکار و نامرتب", "ممکن است زود علاقهتان را از دست بدهید", "گاهی غیرقابل پیشبینی"]
            },
            'تیر': {
                'نقاط قوت': ["عاطفی و مهربان", "خانوادهدوست و دلسوز", "خلاق و هنرمند", "وفادار و متعهد", "غریزهی قوی و شهودی", "عمیق و معنوی"],
                'نقاط ضعف': ["حساس و زودرنج", "گاهی وابسته و نیازمند تایید دیگران", "کمالگرا و خودانتقادگر", "ممکن است احساساتتان شما را کنترل کند", "غیرتی و حساس به قضاوت دیگران", "گاهی درونگرا و منزوی"]
            },
            'مرداد': {
                'نقاط قوت': ["قوی و بااراده", "رهبر و تصمیمگیرنده", "صریح و رک", "متعهد و پایبند به قول", "قابل اعتماد و مسئولیتپذیر", "جاهطلب و مصمم"],
                'نقاط ضعف': ["مغرور و خودمحور", "سلطهجو و کنترلگر", "کینهتوز و کمگذشت", "گاهی بیش از حد سختگیر", "انعطافناپذیر", "ممکن دیگران را تحت فشار بگذارید"]
            },
            'شهریور': {
                'نقاط قوت': ["منظم و دقیق", "کوشا و سختکوش", "عملی و واقعبین", "وفادار و پایدار", "انتقادپذیر (و انتقادگر)", "مسئولیتپذیر و قابل اعتماد"],
                'نقاط ضعف': ["کمالگرا و ایرادگیر", "گاهی سرد و کماحساس", "محافظهکار و ریسکگریز", "ممکن است بیش از حد منتقد باشید", "سختگیر در روابط", "گاهی وسواس در جزئیات"]
            },
            'مهر': {
                'نقاط قوت': ["منصف و عادل", "دیپلماتیک و صلحطلب", "جذاب و دوستداشتنی", "اجتماعی و معاشرتی", "انعطافپذیر و سازگار", "رمانتیک و هنردوست"],
                'نقاط ضعف': ["تودار و کماحساس", "مردد و بیتصمیم", "گاهی وابسته به نظر دیگران", "ممکن است از تعارض فرار کنید", "سطحینگر در برخی روابط", "گاهی بیش از حد سازشکار"]
            },
            'آبان': {
                'نقاط قوت': ["مرموز و جذاب", "شهودی و باهوش", "پرشور و احساساتی", "مصمم و رقابتجو", "وفادار و حامی", "رازدار و قابل اعتماد"],
                'نقاط ضعف': ["کینهتوز و کمگذشت", "کنترلگر و سلطهجو", "گاهی بدبین و مشکوک", "ممکن است افراطی عمل کنید", "انعطافناپذیر در برخی موارد", "احساسات عمیق ولی پنهان"]
            },
            'آذر': {
                'نقاط قوت': ["ماجراجو و آزاداندیش", "خوشبین و شاد", "صادق و رک", "اجتماعی و مردمدار", "انعطافپذیر و سازگار", "انرژیبخش و الهامدهنده"],
                'نقاط ضعف': ["بیتعهد و فرار از مسئولیت", "سطحینگر و کمعمق", "فراموشکار و نامرتب", "ممکن است غیرقابل پیشبینی باشید", "گاهی بیش از حد بیخیال", "عدم پایداری در روابط"]
            },
            'دی': {
                'نقاط قوت': ["جدی و مسئولیتپذیر", "منضبط و قاعدهمند", "صبور و پایدار", "سختکوش و مصمم", "وفادار و قابل اعتماد", "محکم و استوار"],
                'نقاط ضعف': ["سرد و کماحساس", "یکدنده و انعطافناپذیر", "محافظهکار و ترسو", "گاهی بیش از حد منتقد", "خشک و بیحوصله", "ممکن است دیگران را تحت فشار بگذارید"]
            },
            'بهمن': {
                'نقاط قوت': ["خلاق و نوآور", "انقلابی و پیشرو", "بشر دوست و عدالتخواه", "کنجکاو و تحلیلگر", "متعهد به ارزشها", "مرموز و جذاب"],
                'نقاط ضعف': ["غیرقابل پیشبینی", "سرسخت و یکدنده", "گاهی غیرمنطقی", "ممکن است افراطی عمل کنید", "کمتحمل در برابر سنتها", "گاهی منزوی و در خودفرورفته"]
            },
            'اسفند': {
                'نقاط قوت': ["خیالپرداز و خلاق", "حساس و همدل", "رمانتیک و عاشقانه", "مهربان و بخشنده", "شهودی و درک بالا", "انعطافپذیر و سازگار"],
                'نقاط ضعف': ["زودرنج و آسیبپذیر", "غیرواقعبین و رویایی", "گاهی غیرقابل پیشبینی", "فراموشکار و نامرتب", "ممکن است وابسته شوید", "گاهی منزوی و درونگرا"]
            }
        };

        function getRandomElements(arr, count) {
            const shuffled = arr.slice().sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function populatePersonalityMonths() {
            const userMonthSelect = document.getElementById('userBirthMonth');
            const compareMonthSelect = document.getElementById('compareMonth');
            
            userMonthSelect.innerHTML = '<option value="">ماه تولد شما را انتخاب کنید</option>';
            compareMonthSelect.innerHTML = '<option value="">برای مقایسه انتخاب کنید</option>';

            solarMonths.forEach(month => {
                const option1 = document.createElement('option');
                option1.value = month.value;
                option1.innerText = month.text;
                userMonthSelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = month.value;
                option2.innerText = month.text;
                compareMonthSelect.appendChild(option2);
            });
        }

        function populateCompareMonths() {
            populatePersonalityMonths(); // Re-use the same function for now
        }

        function analyzePersonality() {
            const birthMonth = document.getElementById('userBirthMonth').value;
            const gender = document.getElementById('userGender').value;

            if (!birthMonth || !gender) {
                alert('لطفاً ماه تولد و جنسیت خود را انتخاب کنید.');
                return;
            }

            const traits = personalityTraits[birthMonth];
            if (!traits) {
                alert('اطلاعات شخصیتی برای این ماه یافت نشد.');
                return;
            }

            const positiveTraits = getRandomElements(traits['نقاط قوت'], Math.floor(Math.random() * (4 - 3 + 1)) + 3); // 3 to 4 positives
            const negativeTraits = getRandomElements(traits['نقاط ضعف'], Math.floor(Math.random() * (3 - 2 + 1)) + 2); // 2 to 3 negatives

            let resultHtml = `<h2>شخصیت متولدین ماه ${birthMonth}</h2>`;
            resultHtml += `<h3>نقاط قوت شما:</h3><ul>`;
            positiveTraits.forEach(trait => {
                resultHtml += `<li class="positive-point">${trait}</li>`;
            });
            resultHtml += `</ul><h3>نقاط قابل بهبود شما:</h3><ul>`;
            negativeTraits.forEach(trait => {
                resultHtml += `<li class="negative-point">${trait}</li>`;
            });
            resultHtml += `</ul>`;

            document.getElementById('personalityText').innerHTML = resultHtml;
            document.getElementById('personalityResultDiv').style.display = 'block';
            document.getElementById('comparisonResultDiv').style.display = 'none'; // Hide comparison results
        }

        function comparePersonalities() {
            const userMonth = document.getElementById('userBirthMonth').value;
            const compareMonth = document.getElementById('compareMonth').value;

            if (!userMonth || !compareMonth) {
                alert('لطفاً ماه تولد خودتان و ماهی که می‌خواهید مقایسه کنید را انتخاب نمایید.');
                return;
            }
            if (userMonth === compareMonth) {
                alert('لطفاً ماه متفاوتی را برای مقایسه انتخاب کنید.');
                return;
            }

            const userTraits = personalityTraits[userMonth];
            const compareTraits = personalityTraits[compareMonth];

            if (!userTraits || !compareTraits) {
                alert('اطلاعات شخصیتی برای یکی از ماه‌ها یافت نشد.');
                return;
            }

            let commonPositives = userTraits['نقاط قوت'].filter(trait => compareTraits['نقاط قوت'].includes(trait));
            let commonNegatives = userTraits['نقاط ضعف'].filter(trait => compareTraits['نقاط ضعف'].includes(trait));
            
            let userUniquePositives = userTraits['نقاط قوت'].filter(trait => !compareTraits['نقاط قوت'].includes(trait));
            let compareUniquePositives = compareTraits['نقاط قوت'].filter(trait => !userTraits['نقاط قوت'].includes(trait));
            
            let userUniqueNegatives = userTraits['نقاط ضعف'].filter(trait => !compareTraits['نقاط ضعف'].includes(trait));
            let compareUniqueNegatives = compareTraits['نقاط ضعف'].filter(trait => !userTraits['نقاط ضعف'].includes(trait));

            let comparisonHtml = `<h3>مقایسه شخصیت متولد ${userMonth} با متولد ${compareMonth}:</h3>`;
            
            if (commonPositives.length > 0) {
                comparisonHtml += `<p><strong>نقاط مشترک مثبت:</strong></p><ul>`;
                commonPositives.forEach(trait => comparisonHtml += `<li class="positive-point">${trait}</li>`);
                comparisonHtml += `</ul>`;
            } else {
                comparisonHtml += `<p><strong>نقاط مشترک مثبت:</strong> مورد قابل توجهی یافت نشد.</p>`;
            }

            if (userUniquePositives.length > 0 || compareUniquePositives.length > 0) {
                comparisonHtml += `<p><strong>نقاط قوت متفاوت:</strong></p><ul>`;
                userUniquePositives.forEach(trait => comparisonHtml += `<li>متولد ${userMonth}: ${trait}</li>`);
                compareUniquePositives.forEach(trait => comparisonHtml += `<li>متولد ${compareMonth}: ${trait}</li>`);
                comparisonHtml += `</ul>`;
            }

            if (commonNegatives.length > 0) {
                comparisonHtml += `<p><strong>نقاط مشترک منفی (احتمال عدم تفاهم):</strong></p><ul>`;
                commonNegatives.forEach(trait => comparisonHtml += `<li class="negative-point">${trait}</li>`);
                commonNegatives.forEach(trait => comparisonHtml += `<li>هر دو ممکن است در مورد <strong>${trait}</strong> با چالش روبرو شوند.</li>`);
                comparisonHtml += `</ul>`;
            } else {
                comparisonHtml += `<p><strong>نقاط مشترک منفی:</strong> مورد قابل توجهی یافت نشد.</p>`;
            }

             if (userUniqueNegatives.length > 0 || compareUniqueNegatives.length > 0) {
                comparisonHtml += `<p><strong>نقاط ضعف متفاوت:</strong></p><ul>`;
                userUniqueNegatives.forEach(trait => comparisonHtml += `<li>متولد ${userMonth}: ${trait}</li>`);
                compareUniqueNegatives.forEach(trait => comparisonHtml += `<li>متولد ${compareMonth}: ${trait}</li>`);
                comparisonHtml += `</ul>`;
            }


            // General compatibility statement
            let compatibilityStatement = "";
            let compatibilityScore = commonPositives.length * 2 - commonNegatives.length * 2; // Give more weight to shared traits

            if (compatibilityScore >= 3) {
                compatibilityStatement = "شما و متولد این ماه شباهت‌های مثبتی زیادی دارید و احتمالاً به خوبی با هم کنار می‌آیید. تفاهم کلی شما بالاست.";
            } else if (compatibilityScore >= 0) {
                compatibilityStatement = "شما و متولد این ماه می‌توانید در بسیاری از زمینه‌ها تفاهم داشته باشید، با کمی درک متقابل و پذیرش تفاوت‌ها.";
            } else {
                compatibilityStatement = "ممکن است در برخی زمینه‌ها چالش‌هایی در تفاهم با متولد این ماه داشته باشید. نیاز به درک بیشتر از تفاوت‌ها و تلاش برای سازگاری است.";
            }
            comparisonHtml += `<p><strong>نتیجه کلی تفاهم:</strong> ${compatibilityStatement}</p>`;


            document.getElementById('comparisonText').innerHTML = comparisonHtml;
            document.getElementById('comparisonResultDiv').style.display = 'block';
        }

        // --- Loan/Deposit Calculator Logic ---
        function showLoanDepositTab(tabId, clickedButton) {
            // Hide all tab contents
            document.querySelectorAll('.loan-deposit-content').forEach(content => {
                content.style.display = 'none';
            });
            // Deactivate all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show the selected tab content
            document.getElementById(tabId + 'Content').style.display = 'block';
            // Activate the clicked button
            clickedButton.classList.add('active');

            // Hide results when switching tabs
            document.getElementById('depositResultDiv').style.display = 'none';
            document.getElementById('loanResultDiv').style.display = 'none';

            // Reset specific fields when switching tabs for better UX
            if (tabId === 'deposit') {
                document.getElementById('depositAmount').value = '';
                document.getElementById('depositInterestRate').value = '';
                document.getElementById('depositDurationDays').value = '';
                document.getElementById('dailyInterestToggle').checked = false; // Reset to monthly calculation default
                updateDepositDurationLabel(); // Update label based on toggle
            } else { // loan tab
                document.getElementById('loanAmount').value = '';
                document.getElementById('loanInterestRate').value = '';
                document.getElementById('loanDurationMonths').value = '';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const dailyInterestToggle = document.getElementById('dailyInterestToggle');
            if (dailyInterestToggle) {
                dailyInterestToggle.addEventListener('change', updateDepositDurationLabel);
                updateDepositDurationLabel(); // Set initial label
            }
        });

        function updateDepositDurationLabel() {
            const dailyInterestToggle = document.getElementById('dailyInterestToggle');
            const depositDurationLabel = document.getElementById('depositDurationLabel');
            if (dailyInterestToggle.checked) {
                depositDurationLabel.innerText = 'مدت زمان سپرده (روز):';
            } else {
                depositDurationLabel.innerText = 'مدت زمان سپرده (ماه):';
            }
        }

        function calculateDepositInterest() {
            const amount = parseFloat(document.getElementById('depositAmount').value);
            const rate = parseFloat(document.getElementById('depositInterestRate').value);
            const durationInput = parseFloat(document.getElementById('depositDurationDays').value); // This is now days or months
            const isDailyInterest = document.getElementById('dailyInterestToggle').checked;

            if (isNaN(amount) || amount <= 0 || isNaN(rate) || rate <= 0 || isNaN(durationInput) || durationInput <= 0) {
                alert('لطفاً تمام فیلدها را با مقادیر صحیح وارد کنید.');
                return;
            }

            let totalInterest;
            let finalAmount;

            if (isDailyInterest) {
                // Daily interest calculation
                const dailyRate = (rate / 100) / 365; // Assuming 365 days in a year for daily
                totalInterest = amount * dailyRate * durationInput;
            } else {
                // Monthly interest calculation (based on months duration)
                const monthlyRate = (rate / 100) / 12;
                totalInterest = amount * monthlyRate * durationInput;
            }
            
            finalAmount = amount + totalInterest;

            document.getElementById('totalDepositInterest').innerText = totalInterest.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('finalDepositAmount').innerText = finalAmount.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('depositResultDiv').style.display = 'block';
        }

        function calculateLoanInstallment() {
            const amount = parseFloat(document.getElementById('loanAmount').value);
            const rate = parseFloat(document.getElementById('loanInterestRate').value);
            const duration = parseFloat(document.getElementById('loanDurationMonths').value);

            if (isNaN(amount) || amount <= 0 || isNaN(rate) || rate < 0 || isNaN(duration) || duration <= 0) {
                alert('لطفاً تمام فیلدها را با مقادیر صحیح وارد کنید.');
                return;
            }

            const monthlyRate = (rate / 100) / 12;
            let monthlyInstallment;
            let totalInterest;
            let totalPayment;

            if (monthlyRate === 0) { // Simple interest if rate is 0
                monthlyInstallment = amount / duration;
                totalInterest = 0;
                totalPayment = amount;
            } else {
                // Formula for EMI (Equated Monthly Installment)
                monthlyInstallment = amount * monthlyRate * Math.pow(1 + monthlyRate, duration) / (Math.pow(1 + monthlyRate, duration) - 1);
                totalPayment = monthlyInstallment * duration;
                totalInterest = totalPayment - amount;
            }
            
            document.getElementById('monthlyInstallment').innerText = monthlyInstallment.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('totalLoanInterest').innerText = totalInterest.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('totalPayment').innerText = totalPayment.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('loanResultDiv').style.display = 'block';
        }

        // --- Currency Converter Logic ---
        const currencies = [
            { name: 'ریال ایران', symbol: 'IRR' },
            { name: 'دلار آمریکا', symbol: 'USD' },
            { name: 'یورو', symbol: 'EUR' },
            { name: 'پوند بریتانیا', symbol: 'GBP' },
            { name: 'درهم امارات', symbol: 'AED' },
            { name: 'لیر ترکیه', symbol: 'TRY' },
            { name: 'یوان چین', symbol: 'CNY' },
            { name: 'روپیه هند', symbol: 'INR' },
            { name: 'ین ژاپن', symbol: 'JPY' }
        ];

        function populateCurrencies() {
            const fromCurrencySelect = document.getElementById('fromCurrency');
            const toCurrencySelect = document.getElementById('toCurrency');

            fromCurrencySelect.innerHTML = '';
            toCurrencySelect.innerHTML = '';

            currencies.forEach(currency => {
                const optionFrom = document.createElement('option');
                optionFrom.value = currency.symbol;
                optionFrom.innerText = `${currency.name} (${currency.symbol})`;
                fromCurrencySelect.appendChild(optionFrom);

                const optionTo = document.createElement('option');
                optionTo.value = currency.symbol;
                optionTo.innerText = `${currency.name} (${currency.symbol})`;
                toCurrencySelect.appendChild(optionTo);
            });
            // Set default selections
            fromCurrencySelect.value = 'USD';
            toCurrencySelect.value = 'IRR';

            // Add event listeners for changes
            fromCurrencySelect.addEventListener('change', updateExchangeRateLabels);
            toCurrencySelect.addEventListener('change', updateExchangeRateLabels);
            updateExchangeRateLabels(); // Call initially to set correct state
        }

        function updateExchangeRateLabels() {
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;
            const fromCurrencySymbolSpan = document.getElementById('fromCurrencySymbol');
            const toCurrencySymbolSpan = document.getElementById('toCurrencySymbol');
            const exchangeRateInput = document.getElementById('exchangeRate');
            const exchangeRateSmallText = document.querySelector('#exchangeRateInputGroup small');

            fromCurrencySymbolSpan.innerText = fromCurrency;
            toCurrencySymbolSpan.innerText = toCurrency;
            
            // Adjust placeholder and small text based on common conversions (optional)
            if (fromCurrency === 'USD' && toCurrency === 'IRR') {
                exchangeRateInput.placeholder = "مثال: 60000 (برای دلار به تومان)";
                exchangeRateSmallText.innerText = "نرخ هر دلار چند تومان است.";
            } else if (fromCurrency === 'IRR' && toCurrency === 'USD') {
                exchangeRateInput.placeholder = "مثال: 0.000017 (برای تومان به دلار)";
                exchangeRateSmallText.innerText = "هر تومان چند دلار است (مثال: 1/60000).";
            } else {
                 exchangeRateInput.placeholder = "مثال: 12345";
                 exchangeRateSmallText.innerText = "نرخ تبدیل ارز مبدأ به ارز مقصد را وارد کنید (مثال: اگر از دلار به یورو، هر دلار چند یورو است).";
            }

            // Clear previous exchange rate
            exchangeRateInput.value = '';
        }

        function convertCurrency() {
            const amount = parseFloat(document.getElementById('amountToConvert').value);
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;
            const exchangeRate = parseFloat(document.getElementById('exchangeRate').value);

            if (isNaN(amount) || amount <= 0) {
                alert('لطفاً مبلغ را به درستی وارد کنید.');
                return;
            }
            if (!fromCurrency || !toCurrency) {
                alert('لطفاً واحدهای ارزی مبدأ و مقصد را انتخاب کنید.');
                return;
            }
            if (fromCurrency === toCurrency) {
                document.getElementById('convertedAmount').innerText = amount.toLocaleString('fa-IR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ' + fromCurrency;
                document.getElementById('currencyResultDiv').style.display = 'block';
                return;
            }

            if (isNaN(exchangeRate) || exchangeRate <= 0) {
                alert('لطفاً نرخ تبدیل را به درستی وارد کنید (عدد مثبت بزرگتر از صفر).');
                return;
            }

            const convertedValue = amount * exchangeRate;
            
            document.getElementById('convertedAmount').innerText = convertedValue.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' ' + toCurrency;
            document.getElementById('currencyResultDiv').style.display = 'block';
        }

        // --- Hypothetical Services Calculator Logic ---
        // Prices are in USD for easier conversion and consistency
        const hypotheticalServiceCategories = [
            { name: 'خیابانی', minPriceUSD: 10, maxPriceUSD: 30 }, // $10 - $30
            { name: 'مراکز (فرضی)', minPriceUSD: 20, maxPriceUSD: 70 }, // $20 - $70
            { name: 'اسکورت', minPriceUSD: 50, maxPriceUSD: 200 }, // $50 - $200
            { name: 'اینترنتی (اشتراک ماهانه)', minPriceUSD: 5, maxPriceUSD: 25 }, // $5 - $25 per month
            { name: 'معاشرت‌های تجملی (ماهانه)', minPriceUSD: 200, maxPriceUSD: 1000 }, // $200 - $1000 per month
            { name: 'مدل‌های همراهی (رویداد خاص)', minPriceUSD: 500, maxPriceUSD: 2000 } // $500 - $2000 per event
        ];

        function calculateHypotheticalServices() {
            const dollarRate = parseFloat(document.getElementById('dollarExchangeRateHypothetical').value);
            const budgetToman = parseFloat(document.getElementById('hypotheticalBudget').value);

            if (isNaN(dollarRate) || dollarRate <= 0) {
                alert('لطفاً نرخ روز دلار را به درستی وارد کنید.');
                return;
            }
            if (isNaN(budgetToman) || budgetToman <= 0) {
                alert('لطفاً مبلغ ماهیانه فرضی را به درستی وارد کنید (عدد مثبت).');
                return;
            }

            const affordable = [];
            const unaffordable = [];

            hypotheticalServiceCategories.forEach(category => {
                const minPriceToman = category.minPriceUSD * dollarRate;
                const maxPriceToman = category.maxPriceUSD * dollarRate;

                if (budgetToman >= minPriceToman) {
                    affordable.push({ 
                        name: category.name, 
                        minPriceToman: minPriceToman, 
                        maxPriceToman: maxPriceToman 
                    });
                } else {
                    unaffordable.push({ 
                        name: category.name, 
                        minPriceToman: minPriceToman, 
                        maxPriceToman: maxPriceToman 
                    });
                }
            });

            const affordableList = document.getElementById('affordableCategories');
            const unaffordableList = document.getElementById('unaffordableCategories');
            
            affordableList.innerHTML = '';
            unaffordableList.innerHTML = '';

            if (affordable.length > 0) {
                affordable.forEach(category => {
                    const li = document.createElement('li');
                    li.classList.add('category-item');
                    li.innerHTML = `${category.name} <span class="category-range">(محدوده فرضی: ${category.minPriceToman.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 })} تا ${category.maxPriceToman.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 })} تومان)</span>`;
                    affordableList.appendChild(li);
                });
            } else {
                affordableList.innerHTML = '<li>با این مبلغ فرضی، هیچ دسته‌بندی در دسترس نیست.</li>';
            }

            if (unaffordable.length > 0) {
                unaffordable.forEach(category => {
                    const li = document.createElement('li');
                    li.classList.add('category-item');
                    li.innerHTML = `${category.name} <span class="category-range">(محدوده فرضی: ${category.minPriceToman.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 })} تا ${category.maxPriceToman.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 })} تومان)</span>`;
                    unaffordableList.appendChild(li);
                });
            } else {
                unaffordableList.innerHTML = '<li>تمام دسته‌بندی‌ها در دسترس هستند.</li>';
            }

            document.getElementById('hypotheticalServicesResultDiv').style.display = 'block';
        }


        // Initial setup: On page load, only show the navbar.
        document.addEventListener('DOMContentLoaded', (event) => {
            // No active button by default, all app containers are hidden by CSS
            // The showSection function will be called when a nav button is clicked.
        });
    </script>
</body>
</html>
