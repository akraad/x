<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ابزارک‌های هوشمند</title>
    
    <link href="https://cdn.fontcdn.ir/Font/Persian/Shabnam/Shabnam.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        body {
            font-family: 'Shabnam', 'Vazirmatn', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- Navigation Bar Styles (Minimal & Blue) --- */
        .navbar {
            display: flex;
            justify-content: center;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
            padding: 8px 12px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 500px;
            flex-wrap: wrap;
        }
        .nav-button {
            background-color: #007bff; /* Blue */
            color: white; /* White text */
            padding: 7px 14px;
            border: none;
            border-radius: 5px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 3px;
            flex-grow: 1;
            max-width: 150px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-button:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }
        .nav-button.active {
            background-color: #0056b3; /* Darker blue when active */
            box-shadow: 0 1px 6px rgba(0, 123, 255, 0.4); /* Blue shadow */
        }
        .nav-button i {
            margin-left: 5px;
            font-size: 0.9em;
        }

        /* --- Common Form Styles (Minimal & Classic) --- */
        .app-container {
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.07);
            padding: 25px;
            width: 100%;
            max-width: 380px;
            text-align: center;
            border: 1px solid #e0e0e0;
            display: none; /* Initially hidden */
            transition: all 0.3s ease-in-out;
        }
        .app-container h1 {
            margin-bottom: 20px;
            font-size: 1.7em;
            font-weight: 700;
            color: #444;
        }
        .input-group {
            margin-bottom: 15px;
            text-align: right;
            position: relative;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            color: #555;
        }
        .input-group input[type="number"],
        .input-group input[type="text"],
        .input-group select {
            width: calc(100% - 35px);
            padding: 9px 9px 9px 30px;
            border: 1px solid #bbb;
            border-radius: 5px;
            font-size: 0.9em;
            direction: ltr; /* Default for inputs */
            text-align: right;
            transition: border-color 0.2s;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=UTF8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>');
            background-repeat: no-repeat;
            background-position: left 8px center;
            background-size: 14px;
            padding-left: 35px;
        }

        .input-group select {
            width: calc(100% - 15px);
            padding-left: 8px;
            direction: rtl; /* For Persian text in select */
            background-position: left 8px center;
            background-size: 14px;
            cursor: pointer;
        }
        .input-group select option {
            padding: 5px;
        }

        .input-group input[type="number"]:focus,
        .input-group input[type="text"]:focus,
        .input-group select:focus {
            outline: none;
            border-color: #007bff;
        }
        .input-group .icon {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(calc(-50% + 8px));
            color: #888;
            font-size: 1em;
        }
        .input-group small {
            display: block;
            margin-top: 3px;
            color: #888;
            font-size: 0.75em;
        }
        .weight-inputs, .personality-inputs { /* Changed to .personality-inputs */
            display: flex;
            gap: 8px;
        }
        .weight-inputs .input-group, 
        .personality-inputs .input-group {
            flex: 1;
            margin-bottom: 0;
        }
        .app-container button {
            color: white;
            padding: 10px 18px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s ease;
            width: 100%;
            font-weight: 600;
            margin-top: 18px;
        }
        .app-container button:hover {
            opacity: 0.9;
        }
        .result {
            margin-top: 20px;
            background-color: #f8f8f8;
            border: 1px solid #e8e8e8;
            border-radius: 7px;
            padding: 16px;
            font-size: 1.1em;
            color: #333;
            font-weight: 600;
            display: none;
            text-align: right;
            line-height: 1.6;
        }
        .result div {
            margin-bottom: 6px;
        }
        .result span {
            font-size: 0.95em;
            margin-right: 5px;
            font-weight: 700;
        }
        .personality-text { /* New class for personality text */
            font-size: 1.05em;
            font-weight: normal;
            margin-top: 15px;
            text-align: justify;
            background-color: #fdfdfd;
            border: 1px dashed #ddd;
            padding: 15px;
            border-radius: 8px;
            color: #444;
        }
        .comparison-section { /* New section for comparison */
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px dashed #eee;
            text-align: right;
        }
        .comparison-section label {
            font-size: 0.9em;
            color: #555;
            display: block;
            margin-bottom: 10px;
        }
        .comparison-section select {
            width: calc(100% - 15px);
            padding: 9px 9px 9px 8px;
            border: 1px solid #bbb;
            border-radius: 5px;
            font-size: 0.9em;
            direction: rtl;
            background-position: left 8px center;
            background-size: 14px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .comparison-section button {
            margin-top: 10px;
            background-color: #007bff; /* Blue for comparison button */
        }
        .comparison-result {
            margin-top: 15px;
            background-color: #f9f9f9;
            border: 1px solid #e9e9e9;
            border-radius: 7px;
            padding: 15px;
            text-align: right;
        }
        .comparison-result h3 {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }
        .comparison-result p {
            font-size: 0.95em;
            line-height: 1.6;
            color: #555;
            margin-bottom: 8px;
        }
        .positive-point {
            color: #28a745; /* Green for positive points */
            font-weight: 600;
            margin-bottom: 5px;
        }
        .negative-point {
            color: #dc3545; /* Red for negative points */
            font-weight: 600;
            margin-bottom: 5px;
        }


        /* --- Specific Form Colors --- */

        /* Gold Calculator */
        #goldCalculator { border-color: #e0e0e0; }
        #goldCalculator h1 { color: #b8860b; }
        #goldCalculator .input-group input:focus { border-color: #b8860b; }
        #goldCalculator button { background-color: #b8860b; }
        #goldCalculator .result span { color: #b8860b; }

        /* BMI Calculator */
        #bmiCalculator { border-color: #d1e7dd; }
        #bmiCalculator h1 { color: #28a745; }
        #bmiCalculator .input-group input:focus { border-color: #28a745; }
        #bmiCalculator button { background-color: #28a745; }
        #bmiCalculator .result span { color: #28a745; }

        /* Personality Test */
        #personalityTest { border-color: #ffe0b3; }
        #personalityTest h1 { color: #d68910; }
        #personalityTest .input-group input:focus,
        #personalityTest .input-group select:focus { border-color: #d68910; }
        #personalityTest button { background-color: #d68910; }
        #personalityTest .result span { color: #d68910; }
        #personalityTest .comparison-section button { background-color: #007bff; }


        /* Media Queries for Responsiveness */
        @media (max-width: 600px) {
            .navbar {
                flex-direction: column;
                padding: 8px;
            }
            .nav-button {
                margin: 4px 0;
                max-width: none;
                font-size: 0.8em;
                padding: 6px 10px;
            }
            .app-container {
                padding: 18px;
                max-width: 340px;
            }
            .input-group input[type="number"],
            .input-group input[type="text"],
            .input-group select {
                width: calc(100% - 25px);
                padding: 7px 7px 7px 25px;
            }
            .input-group .icon {
                left: 6px;
                font-size: 0.9em;
                transform: translateY(calc(-50% + 7px));
            }
            .input-group select {
                padding-left: 6px;
            }
            .personality-text {
                font-size: 0.95em;
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <button class="nav-button" onclick="showSection('goldCalculator', this)"><i class="fas fa-gem"></i> قیمت طلا</button>
        <button class="nav-button" onclick="showSection('bmiCalculator', this)"><i class="fas fa-calculator"></i> شاخص وزن</button>
        <button class="nav-button" onclick="showSection('personalityTest', this)"><i class="fas fa-brain"></i> تست شخصیت</button>
    </div>

    <div id="goldCalculator" class="app-container">
        <h1><i class="fas fa-gem" style="margin-left: 10px;"></i>محاسبه‌گر هوشمند طلا</h1>
        
        <div class="input-group">
            <label for="goldPriceToman">قیمت روز طلا (تومان در گرم):</label>
            <input type="number" id="goldPriceToman" placeholder="مثال: 3,200,000" min="0">
            <i class="fas fa-coins icon"></i>
        </div>

        <div class="input-group">
            <label for="usdExchangeRate">نرخ برابری دلار به تومان:</label>
            <input type="number" id="usdExchangeRate" placeholder="مثال: 60000" min="1000">
            <i class="fas fa-dollar-sign icon"></i>
            <small>نرخ هر دلار چند تومان است.</small>
        </div>

        <div class="input-group">
            <label>وزن طلا:</label>
            <div class="weight-inputs">
                <div class="input-group">
                    <input type="number" id="goldWeightGram" placeholder="گرم" min="0" step="any">
                    <i class="fas fa-weight-hanging icon"></i>
                </div>
                <div class="input-group">
                    <input type="number" id="goldWeightSoot" placeholder="سوت (تا 999)" min="0" max="999" step="any">
                    <i class="fas fa-balance-scale icon"></i>
                </div>
            </div>
            <small>هر گرم ۱۰۰۰ سوت است. می‌توانید فقط گرم یا سوت را وارد کنید.</small>
        </div>
        
        <div class="input-group">
            <label for="wagePercent">درصد اجرت کار (اختیاری):</label>
            <input type="number" id="wagePercent" placeholder="مثال: 20 (فقط عدد)" min="0" max="100">
            <i class="fas fa-percent icon"></i>
            <small>اگر اجرت ندارد، این فیلد را خالی بگذارید یا ۰ وارد کنید.</small>
        </div>
        
        <button onclick="calculateGoldPrice()">محاسبه قیمت</button>
        
        <div class="result" id="goldResultDiv">
            <div><span>قیمت نهایی:</span> <span id="finalPriceToman"></span> تومان</div>
            <div><span>قیمت نهایی:</span> <span id="finalPriceDollar"></span> دلار</div>
        </div>
    </div>

    <div id="bmiCalculator" class="app-container">
        <h1><i class="fas fa-calculator" style="margin-left: 10px;"></i>محاسبه شاخص توده بدنی (BMI)</h1>
        
        <div class="input-group">
            <label for="weight">وزن (کیلوگرم):</label>
            <input type="number" id="weight" placeholder="مثال: 70" min="1" step="any">
            <i class="fas fa-weight icon"></i>
        </div>
        
        <div class="input-group">
            <label for="height">قد (متر):</label>
            <input type="number" id="height" placeholder="مثال: 1.75" min="0.1" step="0.01">
            <i class="fas fa-ruler-vertical icon"></i>
            <small>مثال: ۱۷۵ سانتی‌متر را ۱.۷۵ متر وارد کنید.</small>
        </div>
        
        <button onclick="calculateBMI()">محاسبه BMI</button>
        
        <div class="result" id="bmiResultDiv">
            <div><span>شاخص BMI شما:</span> <span id="bmiValue"></span></div>
            <div><span>وضعیت:</span> <span id="bmiStatus"></span></div>
        </div>
    </div>

    <div id="personalityTest" class="app-container">
        <h1><i class="fas fa-brain" style="margin-left: 10px;"></i>تست شخصیت‌شناسی</h1>

        <div class="input-group">
            <label for="userBirthMonth">ماه تولد شما:</label>
            <select id="userBirthMonth"></select>
            <i class="fas fa-calendar-star icon"></i>
        </div>

        <div class="input-group">
            <label for="userGender">جنسیت شما:</label>
            <select id="userGender">
                <option value="">انتخاب کنید</option>
                <option value="مرد">مرد</option>
                <option value="زن">زن</option>
                <option value="دیگر">دیگر</option>
            </select>
            <i class="fas fa-venus-mars icon"></i>
        </div>

        <button onclick="analyzePersonality()">تحلیل شخصیت</button>

        <div class="result" id="personalityResultDiv">
            <div class="personality-text" id="personalityText"></div>
            <div class="comparison-section">
                <label for="compareMonth">مقایسه با متولدین ماه:</label>
                <select id="compareMonth"></select>
                <button onclick="comparePersonalities()">مقایسه شخصیت‌ها</button>
                <div class="result comparison-result" id="comparisonResultDiv">
                    <div id="comparisonText"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // --- Navigation Logic ---
        function showSection(sectionId, clickedButton) {
            // Hide all app containers
            document.querySelectorAll('.app-container').forEach(section => {
                section.style.display = 'none';
            });
            // Remove 'active' class from all nav buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show the selected app container
            document.getElementById(sectionId).style.display = 'block';
            // Add 'active' class to the clicked button
            clickedButton.classList.add('active');

            // Reset results when switching sections
            document.querySelectorAll('.result').forEach(resultDiv => {
                resultDiv.style.display = 'none';
            });
            document.getElementById('comparisonResultDiv').style.display = 'none';


            // If switching to personality test, ensure months are populated
            if (sectionId === 'personalityTest') {
                populatePersonalityMonths();
                populateCompareMonths();
            }
        }

        // --- Gold Calculator Logic ---
        function calculateGoldPrice() {
            const goldPricePerGramToman = parseFloat(document.getElementById('goldPriceToman').value);
            const usdExchangeRate = parseFloat(document.getElementById('usdExchangeRate').value);
            const goldWeightGram = parseFloat(document.getElementById('goldWeightGram').value || 0);
            const goldWeightSoot = parseFloat(document.getElementById('goldWeightSoot').value || 0);
            const wagePercent = parseFloat(document.getElementById('wagePercent').value || 0);

            if (isNaN(goldPricePerGramToman) || goldPricePerGramToman <= 0) {
                alert('لطفاً قیمت روز طلا را به درستی وارد کنید.');
                return;
            }
            if (isNaN(usdExchangeRate) || usdExchangeRate <= 0) {
                alert('لطفاً نرخ برابری دلار را به درستی وارد کنید.');
                return;
            }

            const totalWeightGram = goldWeightGram + (goldWeightSoot / 1000);

            if (totalWeightGram <= 0) {
                 alert('لطفاً وزن طلا را وارد کنید.');
                 return;
            }

            let wageAmountToman = (goldPricePerGramToman * (wagePercent / 100)) * totalWeightGram;
            const profitAmountToman = (goldPricePerGramToman * 0.07) * totalWeightGram;
            const taxAmountToman = (wageAmountToman + profitAmountToman) * 0.10;
            const rawGoldPriceToman = goldPricePerGramToman * totalWeightGram;
            const finalPriceToman = rawGoldPriceToman + wageAmountToman + profitAmountToman + taxAmountToman;
            const finalPriceDollar = finalPriceToman / usdExchangeRate;

            document.getElementById('finalPriceToman').innerText = finalPriceToman.toLocaleString('fa-IR');
            document.getElementById('finalPriceDollar').innerText = finalPriceDollar.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById('goldResultDiv').style.display = 'block';
        }

        // --- BMI Calculator Logic ---
        function calculateBMI() {
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);

            if (isNaN(weight) || weight <= 0) {
                alert('لطفاً وزن را به درستی وارد کنید.');
                return;
            }
            if (isNaN(height) || height <= 0) {
                alert('لطفاً قد را به درستی وارد کنید.');
                return;
            }

            const bmi = weight / (height * height);
            let status = '';

            if (bmi < 18.5) {
                status = 'کم‌وزنی';
            } else if (bmi >= 18.5 && bmi <= 24.9) {
                status = 'وزن نرمال';
            } else if (bmi >= 25 && bmi <= 29.9) {
                status = 'اضافه‌وزن';
            } else if (bmi >= 30 && bmi <= 34.9) {
                status = 'چاقی (درجه ۱)';
            } else if (bmi >= 35 && bmi <= 39.9) {
                status = 'چاقی شدید (درجه ۲)';
            } else {
                status = 'چاقی مفرط (درجه ۳)';
            }

            document.getElementById('bmiValue').innerText = bmi.toLocaleString('fa-IR', { minimumFractionDigits: 1, maximumFractionDigits: 1 });
            document.getElementById('bmiStatus').innerText = status;
            document.getElementById('bmiResultDiv').style.display = 'block';
        }

        // --- Personality Test Logic ---
        const solarMonths = [
            { value: 'فروردین', text: 'فروردین (حمل)' }, { value: 'اردیبهشت', text: 'اردیبهشت (ثور)' },
            { value: 'خرداد', text: 'خرداد (جوزا)' }, { value: 'تیر', text: 'تیر (سرطان)' },
            { value: 'مرداد', text: 'مرداد (اسد)' }, { value: 'شهریور', text: 'شهریور (سنبله)' },
            { value: 'مهر', text: 'مهر (میزان)' }, { value: 'آبان', text: 'آبان (عقرب)' },
            { value: 'آذر', text: 'آذر (قوس)' }, { value: 'دی', text: 'دی (جدی)' },
            { value: 'بهمن', text: 'بهمن (دلو)' }, { value: 'اسفند', text: 'اسفند (حوت)' }
        ];

        const personalityTraits = {
            'فروردین': {
                'نقاط قوت': ["انرژی بالا و شروعکنندهی پروژهها", "خلاق و ایدهپرداز", "اجتماعی و خوشمشرب", "خوشبین و امیدوار", "کنجکاو و علاقهمند به یادگیری", "رها و آزاداندیش"],
                'نقاط ضعف': ["ممکن است زود از پروژهها خسته شوید", "بینظم و نامرتب", "روابطتان گاهی سطحی میماند", "عجول و کمحوصله", "گاهی بیش از حد خوشبین و غیرواقعبین", "مسئولیتگریز"]
            },
            'اردیبهشت': {
                'نقاط قوت': ["منظم و برنامهریز", "وفادار و قابل اعتماد", "صبور و با حوصله", "واقعبین و عملگرا", "سختکوش و پرتلاش", "محافظهکار و ریسکگریز"],
                'نقاط ضعف': ["گاهی بیش از حد سختگیر", "مقاوم در برابر تغییر", "ممکن است مادیگرا باشید", "کینهتوزی در صورت آسیب دیدن", "گاهی خشک و بیاحساس", "انعطافناپذیر"]
            },
            'خرداد': {
                'نقاط قوت': ["کنجکاو و دانشجو", "سازگار و انعطافپذیر", "شوخطبع و سرزنده", "همدل و دلسوز", "اجتماعی و خونگرم", "خوشبین و مثبتاندیش"],
                'نقاط ضعف': ["پرحرف و گاهی یکطرفه", "بیقرار و کمتحمل", "سطحینگر و کمعمق", "فراموشکار و نامرتب", "ممکن است زود علاقهتان را از دست بدهید", "گاهی غیرقابل پیشبینی"]
            },
            'تیر': {
                'نقاط قوت': ["عاطفی و مهربان", "خانوادهدوست و دلسوز", "خلاق و هنرمند", "وفادار و متعهد", "غریزهی قوی و شهودی", "عمیق و معنوی"],
                'نقاط ضعف': ["حساس و زودرنج", "گاهی وابسته و نیازمند تایید دیگران", "کمالگرا و خودانتقادگر", "ممکن است احساساتتان شما را کنترل کند", "غیرتی و حساس به قضاوت دیگران", "گاهی درونگرا و منزوی"]
            },
            'مرداد': {
                'نقاط قوت': ["قوی و بااراده", "رهبر و تصمیمگیرنده", "صریح و رک", "متعهد و پایبند به قول", "قابل اعتماد و مسئولیتپذیر", "جاهطلب و مصمم"],
                'نقاط ضعف': ["مغرور و خودمحور", "سلطهجو و کنترلگر", "کینهتوز و کمگذشت", "گاهی بیش از حد سختگیر", "انعطافناپذیر", "ممکن دیگران را تحت فشار بگذارید"]
            },
            'شهریور': {
                'نقاط قوت': ["منظم و دقیق", "کوشا و سختکوش", "عملی و واقعبین", "وفادار و پایدار", "انتقادپذیر (و انتقادگر)", "مسئولیتپذیر و قابل اعتماد"],
                'نقاط ضعف': ["کمالگرا و ایرادگیر", "گاهی سرد و کماحساس", "محافظهکار و ریسکگریز", "ممکن است بیش از حد منتقد باشید", "سختگیر در روابط", "گاهی وسواس در جزئیات"]
            },
            'مهر': {
                'نقاط قوت': ["منصف و عادل", "دیپلماتیک و صلحطلب", "جذاب و دوستداشتنی", "اجتماعی و معاشرتی", "انعطافپذیر و سازگار", "رمانتیک و هنردوست"],
                'نقاط ضعف': ["تودار و کماحساس", "مردد و بیتصمیم", "گاهی وابسته به نظر دیگران", "ممکن است از تعارض فرار کنید", "سطحینگر در برخی روابط", "گاهی بیش از حد سازشکار"]
            },
            'آبان': {
                'نقاط قوت': ["مرموز و جذاب", "شهودی و باهوش", "پرشور و احساساتی", "مصمم و رقابتجو", "وفادار و حامی", "رازدار و قابل اعتماد"],
                'نقاط ضعف': ["کینهتوز و کمگذشت", "کنترلگر و سلطهجو", "گاهی بدبین و مشکوک", "ممکن است افراطی عمل کنید", "انعطافناپذیر در برخی موارد", "احساسات عمیق ولی پنهان"]
            },
            'آذر': {
                'نقاط قوت': ["ماجراجو و آزاداندیش", "خوشبین و شاد", "صادق و رک", "اجتماعی و مردمدار", "انعطافپذیر و سازگار", "انرژیبخش و الهامدهنده"],
                'نقاط ضعف': ["بیتعهد و فرار از مسئولیت", "سطحینگر و کمعمق", "فراموشکار و نامرتب", "ممکن است غیرقابل پیشبینی باشید", "گاهی بیش از حد بیخیال", "عدم پایداری در روابط"]
            },
            'دی': {
                'نقاط قوت': ["جدی و مسئولیتپذیر", "منضبط و قاعدهمند", "صبور و پایدار", "سختکوش و مصمم", "وفادار و قابل اعتماد", "محکم و استوار"],
                'نقاط ضعف': ["سرد و کماحساس", "یکدنده و انعطافناپذیر", "محافظهکار و ترسو", "گاهی بیش از حد منتقد", "خشک و بیحوصله", "ممکن است دیگران را تحت فشار بگذارید"]
            },
            'بهمن': {
                'نقاط قوت': ["خلاق و نوآور", "انقلابی و پیشرو", "بشر دوست و عدالتخواه", "کنجکاو و تحلیلگر", "متعهد به ارزشها", "مرموز و جذاب"],
                'نقاط ضعف': ["غیرقابل پیشبینی", "سرسخت و یکدنده", "گاهی غیرمنطقی", "ممکن است افراطی عمل کنید", "کمتحمل در برابر سنتها", "گاهی منزوی و در خودفرورفته"]
            },
            'اسفند': {
                'نقاط قوت': ["خیالپرداز و خلاق", "حساس و همدل", "رمانتیک و عاشقانه", "مهربان و بخشنده", "شهودی و درک بالا", "انعطافپذیر و سازگار"],
                'نقاط ضعف': ["زودرنج و آسیبپذیر", "غیرواقعبین و رویایی", "گاهی غیرقابل پیشبینی", "فراموشکار و نامرتب", "ممکن است وابسته شوید", "گاهی منزوی و درونگرا"]
            }
        };

        function getRandomElements(arr, count) {
            const shuffled = arr.slice().sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function populatePersonalityMonths() {
            const userMonthSelect = document.getElementById('userBirthMonth');
            const compareMonthSelect = document.getElementById('compareMonth');
            
            userMonthSelect.innerHTML = '<option value="">ماه تولد شما را انتخاب کنید</option>';
            compareMonthSelect.innerHTML = '<option value="">برای مقایسه انتخاب کنید</option>';

            solarMonths.forEach(month => {
                const option1 = document.createElement('option');
                option1.value = month.value;
                option1.innerText = month.text;
                userMonthSelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = month.value;
                option2.innerText = month.text;
                compareMonthSelect.appendChild(option2);
            });
        }

        function populateCompareMonths() {
            // This function is now redundant as populatePersonalityMonths handles both
            // Kept for clarity but could be removed.
            populatePersonalityMonths(); 
        }

        function analyzePersonality() {
            const birthMonth = document.getElementById('userBirthMonth').value;
            const gender = document.getElementById('userGender').value;

            if (!birthMonth || !gender) {
                alert('لطفاً ماه تولد و جنسیت خود را انتخاب کنید.');
                return;
            }

            const traits = personalityTraits[birthMonth];
            if (!traits) {
                alert('اطلاعات شخصیتی برای این ماه یافت نشد.');
                return;
            }

            const positiveTraits = getRandomElements(traits['نقاط قوت'], Math.floor(Math.random() * (4 - 3 + 1)) + 3); // 3 to 4 positives
            const negativeTraits = getRandomElements(traits['نقاط ضعف'], Math.floor(Math.random() * (3 - 2 + 1)) + 2); // 2 to 3 negatives

            let resultHtml = `<h2>شخصیت متولدین ماه ${birthMonth}</h2>`;
            resultHtml += `<h3>نقاط قوت شما:</h3><ul>`;
            positiveTraits.forEach(trait => {
                resultHtml += `<li class="positive-point">${trait}</li>`;
            });
            resultHtml += `</ul><h3>نقاط قابل بهبود شما:</h3><ul>`;
            negativeTraits.forEach(trait => {
                resultHtml += `<li class="negative-point">${trait}</li>`;
            });
            resultHtml += `</ul>`;

            document.getElementById('personalityText').innerHTML = resultHtml;
            document.getElementById('personalityResultDiv').style.display = 'block';
            document.getElementById('comparisonResultDiv').style.display = 'none'; // Hide comparison results
        }

        function comparePersonalities() {
            const userMonth = document.getElementById('userBirthMonth').value;
            const compareMonth = document.getElementById('compareMonth').value;

            if (!userMonth || !compareMonth) {
                alert('لطفاً ماه تولد خودتان و ماهی که می‌خواهید مقایسه کنید را انتخاب نمایید.');
                return;
            }
            if (userMonth === compareMonth) {
                alert('لطفاً ماه متفاوتی را برای مقایسه انتخاب کنید.');
                return;
            }

            const userTraits = personalityTraits[userMonth];
            const compareTraits = personalityTraits[compareMonth];

            if (!userTraits || !compareTraits) {
                alert('اطلاعات شخصیتی برای یکی از ماه‌ها یافت نشد.');
                return;
            }

            let commonPositives = userTraits['نقاط قوت'].filter(trait => compareTraits['نقاط قوت'].includes(trait));
            let commonNegatives = userTraits['نقاط ضعف'].filter(trait => compareTraits['نقاط ضعف'].includes(trait));
            
            let userUniquePositives = userTraits['نقاط قوت'].filter(trait => !compareTraits['نقاط قوت'].includes(trait));
            let compareUniquePositives = compareTraits['نقاط قوت'].filter(trait => !userTraits['نقاط قوت'].includes(trait));
            
            let userUniqueNegatives = userTraits['نقاط ضعف'].filter(trait => !compareTraits['نقاط ضعف'].includes(trait));
            let compareUniqueNegatives = compareTraits['نقاط ضعف'].filter(trait => !userTraits['نقاط ضعف'].includes(trait));

            let comparisonHtml = `<h3>مقایسه شخصیت متولد ${userMonth} با متولد ${compareMonth}:</h3>`;
            
            if (commonPositives.length > 0) {
                comparisonHtml += `<p><strong>نقاط مشترک مثبت:</strong></p><ul>`;
                commonPositives.forEach(trait => comparisonHtml += `<li class="positive-point">${trait}</li>`);
                comparisonHtml += `</ul>`;
            } else {
                comparisonHtml += `<p><strong>نقاط مشترک مثبت:</strong> مورد قابل توجهی یافت نشد.</p>`;
            }

            if (userUniquePositives.length > 0 || compareUniquePositives.length > 0) {
                comparisonHtml += `<p><strong>نقاط قوت متفاوت:</strong></p><ul>`;
                userUniquePositives.forEach(trait => comparisonHtml += `<li>متولد ${userMonth}: ${trait}</li>`);
                compareUniquePositives.forEach(trait => comparisonHtml += `<li>متولد ${compareMonth}: ${trait}</li>`);
                comparisonHtml += `</ul>`;
            }

            if (commonNegatives.length > 0) {
                comparisonHtml += `<p><strong>نقاط مشترک منفی (احتمال عدم تفاهم):</strong></p><ul>`;
                commonNegatives.forEach(trait => comparisonHtml += `<li class="negative-point">${trait}</li>`);
                comparisonHtml += `</ul>`;
            } else {
                comparisonHtml += `<p><strong>نقاط مشترک منفی:</strong> مورد قابل توجهی یافت نشد.</p>`;
            }

             if (userUniqueNegatives.length > 0 || compareUniqueNegatives.length > 0) {
                comparisonHtml += `<p><strong>نقاط ضعف متفاوت:</strong></p><ul>`;
                userUniqueNegatives.forEach(trait => comparisonHtml += `<li>متولد ${userMonth}: ${trait}</li>`);
                compareUniqueNegatives.forEach(trait => comparisonHtml += `<li>متولد ${compareMonth}: ${trait}</li>`);
                comparisonHtml += `</ul>`;
            }


            // General compatibility statement
            let compatibilityStatement = "";
            let compatibilityScore = commonPositives.length - commonNegatives.length;

            if (compatibilityScore >= 3) {
                compatibilityStatement = "شما و متولد این ماه شباهت‌های مثبتی زیادی دارید و احتمالاً به خوبی با هم کنار می‌آیید.";
            } else if (compatibilityScore >= 0) {
                compatibilityStatement = "شما و متولد این ماه می‌توانید در بسیاری از زمینه‌ها تفاهم داشته باشید، با کمی درک متقابل.";
            } else {
                compatibilityStatement = "ممکن است در برخی زمینه‌ها چالش‌هایی در تفاهم با متولد این ماه داشته باشید. نیاز به درک بیشتر از تفاوت‌هاست.";
            }
            comparisonHtml += `<p><strong>نتیجه کلی تفاهم:</strong> ${compatibilityStatement}</p>`;


            document.getElementById('comparisonText').innerHTML = comparisonHtml;
            document.getElementById('comparisonResultDiv').style.display = 'block';
        }

        // Initial setup: On page load, only show the navbar.
        document.addEventListener('DOMContentLoaded', (event) => {
            // No active button by default, all app containers are hidden by CSS
            // The showSection function will be called when a nav button is clicked.
        });
    </script>
</body>
</html>
