<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پیش‌بینی تقریبی تاریخ مرگ</title>
    <style>
        :root {
            --primary-blue: #3498db;
            --secondary-orange: #e67e22;
            --light-gray: #ecf0f1;
            --medium-gray: #bdc3c7;
            --dark-gray: #34495e;
            --text-color: #2c3e50;
            --border-color: #dfe6e9;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-gray);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            line-height: 1.6;
            color: var(--text-color);
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 750px;
            border: 1px solid var(--border-color);
        }
        h1, h2 {
            text-align: center;
            color: var(--dark-gray);
            margin-bottom: 25px;
            font-weight: 600;
        }
        h2 {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
            margin-top: 35px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-color);
            font-weight: bold;
            font-size: 1.05em;
        }
        input[type="text"],
        input[type="number"],
        select {
            width: calc(100% - 24px);
            padding: 12px;
            border: 1px solid var(--medium-gray);
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
            background-color: #fcfcfc;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }
        .radio-group label {
            display: inline-block;
            margin-left: 20px;
            font-weight: normal;
            font-size: 1em;
            cursor: pointer;
        }
        .radio-group input[type="radio"] {
            margin-left: 5px;
            transform: scale(1.1);
            cursor: pointer;
        }
        button {
            background-color: var(--primary-blue);
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.15rem;
            width: 100%;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 25px;
            font-weight: bold;
        }
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }
        #result {
            margin-top: 35px;
            padding: 25px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            background-color: #fdfdfd;
            text-align: center;
            font-size: 1.2rem;
            color: var(--text-color);
            animation: fadeIn 1s ease-in-out;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .result-date {
            font-size: 2.2em;
            color: var(--secondary-orange);
            font-weight: bold;
            margin: 20px 0;
            display: block;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .disclaimer {
            margin-top: 25px;
            font-size: 0.9em;
            color: #7f8c8d;
            text-align: center;
            line-height: 1.5;
            padding: 10px;
            background-color: #f0f4f7;
            border-radius: 8px;
            border: 1px solid #e0e7ed;
        }
        .suggestions-list {
            text-align: right;
            margin-top: 30px;
            border-top: 1px dashed var(--medium-gray);
            padding-top: 25px;
        }
        .suggestions-list h3 {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-size: 1.3em;
            text-align: center;
        }
        .suggestions-list ul {
            list-style-type: disc;
            padding-right: 30px;
            margin-top: 10px;
            text-align: right;
        }
        .suggestions-list li {
            margin-bottom: 12px;
            line-height: 1.8;
            color: var(--text-color);
            font-weight: bold; /* Make suggestions bold */
        }
        .suggestions-list li span.benefit {
            color: var(--secondary-orange);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>برنامه پیش‌بینی تقریبی تاریخ مرگ</h1>
        <div class="disclaimer">
            <p><strong>توجه:</strong> این برنامه فقط برای سرگرمی است و پیش‌بینی‌های آن پایه علمی قوی ندارند. تاریخ مرگ قابل پیش‌بینی نیست و عوامل بسیار زیادی در آن دخیل هستند. این برنامه صرفاً بر اساس فرضیات و امتیازدهی‌های فرضی کار می‌کند.</p>
        </div>
        <form id="deathPredictorForm">
            <h2>مشخصات فردی</h2>
            <div class="form-group">
                <label for="name">نام کامل:</label>
                <input type="text" id="name" required placeholder="نام خود را وارد کنید">
            </div>
            <div class="form-group">
                <label for="age">سن فعلی:</label>
                <input type="number" id="age" min="1" max="120" required placeholder="سن خود را وارد کنید">
            </div>
            <div class="form-group">
                <label>جنسیت:</label>
                <div class="radio-group">
                    <input type="radio" id="male" name="gender" value="male" required>
                    <label for="male">مرد</label>
                    <input type="radio" id="female" name="gender" value="female">
                    <label for="female">زن</label>
                </div>
            </div>
            <div class="form-group">
                <label for="residence">محل زندگی اصلی شما:</label>
                <select id="residence" required>
                    <option value="">انتخاب کنید</option>
                    <option value="urban_large">کلان‌شهر (تهران، مشهد، اصفهان و...)</option>
                    <option value="urban_small">شهر کوچک یا متوسط</option>
                    <option value="rural">روستا یا منطقه ییلاقی</option>
                </select>
            </div>

            <h2>سوالات سبک زندگی</h2>
            
            <div class="form-group">
                <label for="smoking">۱. وضعیت استعمال دخانیات (سیگار، قلیان، ویپ و...):</label>
                <select id="smoking" required>
                    <option value="">انتخاب کنید</option>
                    <option value="never">هرگز مصرف نکرده‌ام</option>
                    <option value="ex_occasional">قبلاً گاه‌گاهی مصرف می‌کردم، الان ترک کرده‌ام</option>
                    <option value="ex_daily">قبلاً روزانه مصرف می‌کردم، الان ترک کرده‌ام</option>
                    <option value="occasional">گاهی (مثلاً در مهمانی‌ها) مصرف می‌کنم</option>
                    <option value="light_daily">روزانه به مقدار کم (مثلاً ۱-۵ نخ سیگار)</option>
                    <option value="heavy_daily">روزانه به مقدار زیاد (بیش از ۵ نخ سیگار یا هر روز قلیان)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="alcohol">۲. وضعیت مصرف الکل:</label>
                <select id="alcohol" required>
                    <option value="">انتخاب کنید</option>
                    <option value="never">هرگز مصرف نکرده‌ام</option>
                    <option value="rarely">به ندرت (سالانه کمتر از ۵ بار)</option>
                    <option value="socially">گاهی در موقعیت‌های اجتماعی (ماهیانه ۱-۳ بار)</option>
                    <option value="regular">به صورت منظم (هفتگی یا چند بار در هفته)</option>
                    <option value="heavy">مصرف سنگین و مکرر (تقریباً روزانه یا مقادیر زیاد)</option>
                    <option value="dependent">وابستگی شدید به الکل</option>
                </select>
            </div>

            <div class="form-group">
                <label for="diet">۳. رژیم غذایی معمول شما بیشتر شامل چه مواردی است؟</label>
                <select id="diet" required>
                    <option value="">انتخاب کنید</option>
                    <option value="healthy_plant">عمدتاً گیاهی (میوه، سبزیجات، غلات کامل) و سالم</option>
                    <option value="balanced_home">متعادل، بیشتر غذاهای خانگی و تازه</option>
                    <option value="balanced_mixed">متعادل، ترکیبی از خانگی و رستورانی/آماده</option>
                    <option value="fast_food_moderate">متوسط فست فود و غذاهای فرآوری‌شده (چند بار در ماه)</option>
                    <option value="fast_food_often">اغلب فست فود و غذاهای فرآوری‌شده (هفتگی)</option>
                    <option value="unhealthy_processed">عمدتاً غذاهای آماده، شیرین و پرچرب</option>
                </select>
            </div>

            <div class="form-group">
                <label for="activity">۴. سطح فعالیت بدنی منظم شما در هفته چقدر است؟</label>
                <select id="activity" required>
                    <option value="">انتخاب کنید</option>
                    <option value="very_active">بیش از ۵ ساعت ورزش شدید یا فعالیت فیزیکی سنگین</option>
                    <option value="active">۳-۵ ساعت ورزش متوسط تا شدید</option>
                    <option value="moderate">۱-۳ ساعت فعالیت سبک تا متوسط</option>
                    <option value="light">کمتر از ۱ ساعت فعالیت سبک</option>
                    <option value="sedentary_light">عمدتاً کم‌تحرک، گاهی فعالیت بسیار سبک</option>
                    <option value="sedentary_none">بیشتر زمان بیداری را نشسته‌ام و فعالیت فیزیکی ندارم</option>
                </select>
            </div>

            <div class="form-group">
                <label for="sleep">۵. کیفیت و مدت زمان خواب شما در شبانه‌روز چگونه است؟</label>
                <select id="sleep" required>
                    <option value="">انتخاب کنید</option>
                    <option value="optimal">۷-۹ ساعت خواب با کیفیت و منظم</option>
                    <option value="good">۶-۹ ساعت خواب، گاهی با تغییرات جزئی</option>
                    <option value="some_disruption">گاهی مشکلات خواب (بی‌خوابی، بیدار شدن مکرر)</option>
                    <option value="less_than_6">معمولاً کمتر از ۶ ساعت خواب</option>
                    <option value="more_than_9">معمولاً بیشتر از ۹ ساعت خواب</option>
                    <option value="poor_irregular">خواب نامنظم، کمیت و کیفیت پایین</option>
                </select>
            </div>

            <div class="form-group">
                <label for="stress">۶. سطح استرس و اضطراب شما در زندگی روزمره چقدر است؟</label>
                <select id="stress" required>
                    <option value="">انتخاب کنید</option>
                    <option value="very_low">بسیار کم، تقریباً بدون استرس</option>
                    <option value="low">کم، توانایی خوب در مدیریت استرس</option>
                    <option value="moderate">متوسط، گاهی احساس استرس می‌کنم</option>
                    <option value="high">زیاد، اغلب احساس استرس و اضطراب</option>
                    <option value="very_high">بسیار زیاد، استرس مداوم و تاثیرگذار بر زندگی</option>
                    <option value="chronic_stress">استرس مزمن و شدید به همراه مشکلات روانی</option>
                </select>
            </div>

            <div class="form-group">
                <label for="heredity">۷. سابقه بیماری‌های مزمن (مانند قلبی، سرطان، دیابت) در خانواده نزدیک شما:</label>
                <select id="heredity" required>
                    <option value="">انتخاب کنید</option>
                    <option value="none">هیچ مورد شناخته‌شده‌ای نداریم</option>
                    <option value="minor_distant">یک یا دو مورد خفیف یا در بستگان دورتر</option>
                    <option value="some_close">چند مورد در بستگان نزدیک (والدین، خواهر/برادر)</option>
                    <option value="significant_close">موارد شایع و جدی در بستگان نزدیک</option>
                    <option value="widespread_severe">تعداد زیادی از موارد شایع و شدید در خانواده</option>
                    <option value="early_onset">بیماری‌های جدی با شروع زودرس در بستگان نزدیک</option>
                </select>
            </div>

            <div class="form-group">
                <label for="job">۸. نوع شغل اصلی شما و میزان خطر مرتبط با آن:</label>
                <select id="job" required>
                    <option value="">انتخاب کنید</option>
                    <option value="very_low_risk">بسیار کم‌خطر (کارمند اداری، برنامه‌نویس، محقق)</option>
                    <option value="low_risk">کم‌خطر (معلم، فروشنده در مغازه، طراح)</option>
                    <option value="medium_risk">متوسط خطر (راننده تاکسی، پرستار، کارمند بانک)</option>
                    <option value="high_risk">پرخطر (کارگر ساختمانی، مکانیک، نیروی انتظامی، خلبان)</option>
                    <option value="very_high_risk">بسیار پرخطر (معدن‌کار، آتش‌نشان، کار با مواد شیمیایی خطرناک)</option>
                    <option value="extreme_risk">خطر جانی بسیار بالا (نیروی نظامی در منطقه جنگی، برخی مشاغل صنعتی)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="bmi">۹. وضعیت وزن و شاخص توده بدنی (BMI) شما:</label>
                <select id="bmi" required>
                    <option value="">انتخاب کنید</option>
                    <option value="underweight">کمبود وزن (BMI زیر ۱۸.۵)</option>
                    <option value="healthy">محدوده سالم (BMI ۱۸.۵-۲۴.۹)</option>
                    <option value="overweight">اضافه‌وزن (BMI ۲۵-۲۹.۹)</option>
                    <option value="obese_class1">چاقی درجه ۱ (BMI ۳۰-۳۴.۹)</option>
                    <option value="obese_class2">چاقی درجه ۲ (BMI ۳۵-۳۹.۹)</option>
                    <option value="morbidly_obese">چاقی مفرط (BMI ۴۰ به بالا)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="checkup">۱۰. میزان مراجعه شما به پزشک برای چکاپ‌های منظم و پیشگیرانه:</label>
                <select id="checkup" required>
                    <option value="">انتخاب کنید</option>
                    <option value="annual_full">سالانه چکاپ کامل پزشکی</option>
                    <option value="regular_partial">مراجعه منظم برای برخی چکاپ‌ها (مثلاً دندانپزشکی)</option>
                    <option value="occasional">گاهی اوقات (مثلاً هر ۲-۳ سال یکبار)</option>
                    <option value="rarely">به ندرت، فقط در صورت بیماری شدید</option>
                    <option value="never">هرگز، به پزشک مراجعه نمی‌کنم</option>
                    <option value="avoid_doctors">از مراجعه به پزشک به شدت اجتناب می‌کنم</option>
                </select>
            </div>

            <div class="form-group">
                <label for="pollution">۱۱. میزان قرار گرفتن شما در معرض آلودگی هوا (محل زندگی یا کار):</label>
                <select id="pollution" required>
                    <option value="">انتخاب کنید</option>
                    <option value="very_low">بسیار کم (مناطق روستایی پاک، کوهستانی)</option>
                    <option value="low">کم (شهرهای کوچک با هوای نسبتاً خوب)</option>
                    <option value="medium">متوسط (کلان‌شهرها با آلودگی فصلی)</option>
                    <option value="high">زیاد (کلان‌شهرها با آلودگی مداوم و شدید)</option>
                    <option value="very_high">بسیار زیاد (نزدیک به صنایع آلاینده، ترافیک سنگین)</option>
                    <option value="extreme">کار یا زندگی در محیط‌های صنعتی با آلودگی بسیار بالا</option>
                </select>
            </div>

            <div class="form-group">
                <label for="social">۱۲. کیفیت و کمیت روابط اجتماعی و حمایت‌های اطرافیان شما:</label>
                <select id="social" required>
                    <option value="">انتخاب کنید</option>
                    <option value="strong_extensive">شبکه بسیار قوی و گسترده از دوستان و خانواده</option>
                    <option value="strong_close">شبکه قوی از دوستان و خانواده نزدیک</option>
                    <option value="moderate">چند دوست نزدیک و روابط خانوادگی متوسط</option>
                    <option value="limited">روابط اجتماعی محدود، تعداد کمی دوست</option>
                    <option value="mostly_alone">بیشتر اوقات تنها هستم و روابط حمایتی کمی دارم</option>
                    <option value="isolated">احساس انزوا و تنهایی شدید</option>
                </select>
            </div>

            <div class="form-group">
                <label for="outlook">۱۳. نگرش کلی شما به زندگی و میزان خوش‌بینی‌تان:</label>
                <select id="outlook" required>
                    <option value="">انتخاب کنید</option>
                    <option value="very_positive">بسیار مثبت و خوش‌بین</option>
                    <option value="positive">مثبت و امیدوار</option>
                    <option value="realistic">واقع‌بینانه، نه خیلی خوش‌بین نه خیلی بدبین</option>
                    <option value="sometimes_negative">گاهی اوقات منفی‌نگر و ناامید</option>
                    <option value="often_negative">اغلب منفی‌نگر و بدبین</option>
                    <option value="pessimistic_depressed">بسیار بدبین، احساس افسردگی مداوم</option>
                </select>
            </div>

            <div class="form-group">
                <label for="education">۱۴. بالاترین مدرک تحصیلی شما:</label>
                <select id="education" required>
                    <option value="">انتخاب کنید</option>
                    <option value="illiterate">بی‌سواد یا سواد خواندن و نوشتن</option>
                    <option value="elementary">ابتدایی</option>
                    <option value="diploma">دیپلم</option>
                    <option value="bachelor">کارشناسی (لیسانس)</option>
                    <option value="master">کارشناسی ارشد (فوق لیسانس)</option>
                    <option value="phd_higher">دکترا و بالاتر</option>
                </select>
            </div>

            <div class="form-group">
                <label for="medication">۱۵. آیا به طور منظم از داروهای خاصی (غیر از ویتامین) استفاده می‌کنید؟</label>
                <select id="medication" required>
                    <option value="">انتخاب کنید</option>
                    <option value="no">خیر</option>
                    <option value="minor_condition">بله، برای یک بیماری خفیف یا کنترل شده (مثلاً آلرژی فصلی)</option>
                    <option value="moderate_condition">بله، برای یک بیماری مزمن متوسط (مثلاً فشار خون کنترل شده)</option>
                    <option value="serious_condition">بله، برای یک بیماری مزمن جدی (مثلاً دیابت نوع ۲، بیماری قلبی)</option>
                    <option value="multiple_serious">بله، برای چندین بیماری مزمن جدی</option>
                    <option value="lifelong_critical">بله، برای بیماری‌های بحرانی و مادام‌العمر (مثلاً نارسایی کلیه)</option>
                </select>
            </div>
            
            <button type="submit">پیش‌بینی کن!</button>
        </form>

        <div id="result">
            </div>
    </div>

    <script>
        document.getElementById('deathPredictorForm').addEventListener('submit', function(event) {
            event.preventDefault(); // جلوگیری از ارسال فرم و رفرش صفحه

            const name = document.getElementById('name').value;
            const age = parseInt(document.getElementById('age').value);
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const residence = document.getElementById('residence').value;

            // امتیازدهی اولیه (امید به زندگی پایه)
            let baseLifeExpectancy = 78; // سال پایه امید به زندگی (با توجه به میانگین جهانی و ایران)

            // تنظیم امید به زندگی پایه بر اساس جنسیت
            if (gender === 'female') {
                baseLifeExpectancy += 4; // زنان معمولاً بیشتر عمر می‌کنند
            } else { // male
                baseLifeExpectancy -= 2; // مردان معمولاً کمتر عمر می‌کنند
            }

            // تنظیم امید به زندگی پایه بر اساس محل زندگی
            if (residence === 'urban_large') {
                baseLifeExpectancy -= 3; // آلودگی و استرس بیشتر
            } else if (residence === 'urban_small') {
                baseLifeExpectancy += 0; 
            } else if (residence === 'rural') {
                baseLifeExpectancy += 2; // هوای پاک‌تر و استرس کمتر
            }

            let score = 0; // امتیازات جمع‌آوری شده از سوالات سبک زندگی

            function getSelectValue(id) {
                return document.getElementById(id).value;
            }

            // امتیازدهی سوالات با 6 گزینه (تعدیل شده برای واقع‌گرایی بیشتر)
            const smoking = getSelectValue('smoking');
            if (smoking === 'never') score += 7;
            else if (smoking === 'ex_occasional') score += 4;
            else if (smoking === 'ex_daily') score += 2;
            else if (smoking === 'occasional') score -= 4;
            else if (smoking === 'light_daily') score -= 9;
            else if (smoking === 'heavy_daily') score -= 15;

            const alcohol = getSelectValue('alcohol');
            if (alcohol === 'never') score += 5;
            else if (alcohol === 'rarely') score += 3;
            else if (alcohol === 'socially') score += 1;
            else if (alcohol === 'regular') score -= 5;
            else if (alcohol === 'heavy') score -= 10;
            else if (alcohol === 'dependent') score -= 20;

            const diet = getSelectValue('diet');
            if (diet === 'healthy_plant') score += 6;
            else if (diet === 'balanced_home') score += 4;
            else if (diet === 'balanced_mixed') score += 1;
            else if (diet === 'fast_food_moderate') score -= 3;
            else if (diet === 'fast_food_often') score -= 8;
            else if (diet === 'unhealthy_processed') score -= 12;

            const activity = getSelectValue('activity');
            if (activity === 'very_active') score += 7;
            else if (activity === 'active') score += 5;
            else if (activity === 'moderate') score += 2;
            else if (activity === 'light') score -= 2;
            else if (activity === 'sedentary_light') score -= 5;
            else if (activity === 'sedentary_none') score -= 10;

            const sleep = getSelectValue('sleep');
            if (sleep === 'optimal') score += 5;
            else if (sleep === 'good') score += 3;
            else if (sleep === 'some_disruption') score -= 2;
            else if (sleep === 'less_than_6') score -= 5;
            else if (sleep === 'more_than_9') score -= 4; 
            else if (sleep === 'poor_irregular') score -= 9;

            const stress = getSelectValue('stress');
            if (stress === 'very_low') score += 6;
            else if (stress === 'low') score += 4;
            else if (stress === 'moderate') score += 0;
            else if (stress === 'high') score -= 5;
            else if (stress === 'very_high') score -= 10;
            else if (stress === 'chronic_stress') score -= 15;

            const heredity = getSelectValue('heredity');
            if (heredity === 'none') score += 5;
            else if (heredity === 'minor_distant') score += 2;
            else if (heredity === 'some_close') score -= 4;
            else if (heredity === 'significant_close') score -= 8;
            else if (heredity === 'widespread_severe') score -= 12;
            else if (heredity === 'early_onset') score -= 18;

            const job = getSelectValue('job');
            if (job === 'very_low_risk') score += 5;
            else if (job === 'low_risk') score += 3;
            else if (job === 'medium_risk') score += 0;
            else if (job === 'high_risk') score -= 6;
            else if (job === 'very_high_risk') score -= 12;
            else if (job === 'extreme_risk') score -= 20;

            const bmi = getSelectValue('bmi');
            if (bmi === 'healthy') score += 5;
            else if (bmi === 'underweight') score -= 3; 
            else if (bmi === 'overweight') score -= 2;
            else if (bmi === 'obese_class1') score -= 7;
            else if (bmi === 'obese_class2') score -= 12;
            else if (bmi === 'morbidly_obese') score -= 18;

            const checkup = getSelectValue('checkup');
            if (checkup === 'annual_full') score += 5;
            else if (checkup === 'regular_partial') score += 2;
            else if (checkup === 'occasional') score += 0;
            else if (checkup === 'rarely') score -= 4;
            else if (checkup === 'never') score -= 9;
            else if (checkup === 'avoid_doctors') score -= 14;

            const pollution = getSelectValue('pollution');
            if (pollution === 'very_low') score += 4;
            else if (pollution === 'low') score += 2;
            else if (pollution === 'medium') score -= 2;
            else if (pollution === 'high') score -= 6;
            else if (pollution === 'very_high') score -= 10;
            else if (pollution === 'extreme') score -= 15;

            const social = getSelectValue('social');
            if (social === 'strong_extensive') score += 5;
            else if (social === 'strong_close') score += 3;
            else if (social === 'moderate') score += 0;
            else if (social === 'limited') score -= 3;
            else if (social === 'mostly_alone') score -= 7;
            else if (social === 'isolated') score -= 10;

            const outlook = getSelectValue('outlook');
            if (outlook === 'very_positive') score += 4;
            else if (outlook === 'positive') score += 2;
            else if (outlook === 'realistic') score += 0;
            else if (outlook === 'sometimes_negative') score -= 2;
            else if (outlook === 'often_negative') score -= 5;
            else if (outlook === 'pessimistic_depressed') score -= 9;

            const education = getSelectValue('education');
            if (education === 'phd_higher') score += 4;
            else if (education === 'master') score += 3;
            else if (education === 'bachelor') score += 1;
            else if (education === 'diploma') score += 0;
            else if (education === 'elementary') score -= 2;
            else if (education === 'illiterate') score -= 4;

            const medication = getSelectValue('medication');
            if (medication === 'no') score += 4;
            else if (medication === 'minor_condition') score += 1;
            else if (medication === 'moderate_condition') score -= 3;
            else if (medication === 'serious_condition') score -= 8;
            else if (medication === 'multiple_serious') score -= 12;
            else if (medication === 'lifelong_critical') score -= 18;
            
            // محاسبه امید به زندگی نهایی
            let finalLifeExpectancy = baseLifeExpectancy + score;

            // جلوگیری از نتایج غیرمنطقی
            if (finalLifeExpectancy < age + 1) { 
                finalLifeExpectancy = age + 1; // حداقل یک سال دیگر
            }
            if (finalLifeExpectancy > 110) { // حداکثر 110 سال (فرضی)
                finalLifeExpectancy = 110;
            }

            const yearsToLive = finalLifeExpectancy - age;
            
            // --- شروع بخش تصادفی‌سازی تاریخ هجری شمسی ---
            // تابع کمکی برای تبدیل تاریخ میلادی به شمسی
            // این تابع ساده‌سازی شده است و برای تبدیل دقیق نیاز به کتابخانه جامع‌تری دارد.
            // اما برای نمایش ماه و روز تصادفی شمسی کافی است.
            function gregorianToPersian(gDate) {
                const jalaliMonths = ['فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'];
                
                // این بخش برای تبدیل دقیق میلادی به شمسی نیست و فقط برای گرفتن یک روز و ماه تصادفی است.
                // فرض می‌کنیم در سال پیش‌بینی شده، یک روز و ماه تصادفی میلادی را به عنوان تاریخ شمسی نمایش می‌دهیم
                // تا تنوع داشته باشد.
                let gYear = gDate.getFullYear();
                let gMonth = gDate.getMonth();
                let gDay = gDate.getDate();

                // برای نمایش تصادفی ماه و روز شمسی، یک ماه و روز تصادفی از تقویم شمسی انتخاب می‌کنیم.
                const randomMonthIndex = Math.floor(Math.random() * 12); // 0 تا 11
                const randomDay = Math.floor(Math.random() * 29) + 1; // 1 تا 29 (برای سادگی)

                // این یک تبدیل دقیق نیست، فقط برای گرفتن نام ماه شمسی و روز تصادفی برای نمایش
                const persianMonthName = jalaliMonths[randomMonthIndex];
                const persianYear = gYear + 621; // تقریبی از تبدیل سال میلادی به شمسی
                
                return {
                    year: persianYear,
                    monthName: persianMonthName,
                    day: randomDay
                };
            }

            const currentDate = new Date();
            const predictedDeathYear = currentDate.getFullYear() + yearsToLive;
            
            // ساخت یک تاریخ میلادی تصادفی در سال پیش‌بینی شده
            const randomMonthIndexGregorian = Math.floor(Math.random() * 12); // 0-11
            const randomDayGregorian = Math.floor(Math.random() * 28) + 1; // 1-28 برای جلوگیری از مشکلات روزهای ماه
            const predictedDeathDateGregorian = new Date(predictedDeathYear, randomMonthIndexGregorian, randomDayGregorian);

            // تبدیل تاریخ میلادی تصادفی به شمسی برای نمایش
            const persianDate = gregorianToPersian(predictedDeathDateGregorian);
            const formattedDayOfWeek = predictedDeathDateGregorian.toLocaleDateString('fa-IR', { weekday: 'long' });

            const finalDeathDateText = `${persianDate.day} ${persianDate.monthName} ${persianDate.year} شمسی`;
            // --- پایان بخش تصادفی‌سازی تاریخ هجری شمسی ---

            let resultHtml = `
                <p><strong>${name}</strong> عزیز،</p>
                <p>با توجه به اطلاعات شما، پیش‌بینی تقریبی ما این است که با توکل به خدا، تا حدود <strong>${finalLifeExpectancy.toFixed(0)}</strong> سالگی عمر کنید.</p>
                <p>این به معنی درگذشت شما در حدود:</p>
                <span class="result-date">${finalDeathDateText}</span>
                <p>که مصادف با <strong>${formattedDayOfWeek}</strong> خواهد بود.</p>
            `;

            // پیشنهادات افزایش طول عمر (تیتروار)
            let suggestions = "<div class='suggestions-list'><h3>برای افزایش عمر، این کارها را در نظر بگیرید:</h3><ul>";
            let hasSuggestions = false;

            if (smoking !== 'never' && smoking !== 'ex_occasional' && smoking !== 'ex_daily') {
                suggestions += `<li>ترک کامل دخانیات <span class="benefit">(+۷ تا +۱۵ سال به عمرتان اضافه می‌شود)</span></li>`;
                hasSuggestions = true;
            }
            if (alcohol === 'regular' || alcohol === 'heavy' || alcohol === 'dependent') {
                suggestions += `<li>کاهش یا قطع مصرف الکل <span class="benefit">(+۵ تا +۲۰ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (diet === 'fast_food_moderate' || diet === 'fast_food_often' || diet === 'unhealthy_processed') {
                suggestions += `<li>رژیم غذایی سالم (کاهش فست فود، افزایش میوه و سبزیجات) <span class="benefit">(+۶ تا +۱۲ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (activity === 'light' || activity === 'sedentary_light' || activity === 'sedentary_none') {
                suggestions += `<li>افزایش فعالیت بدنی منظم <span class="benefit">(+۴ تا +۱۰ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (sleep === 'less_than_6' || sleep === 'more_than_9' || sleep === 'poor_irregular') {
                suggestions += `<li>بهبود کیفیت و کمیت خواب <span class="benefit">(+۳ تا +۷ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (stress === 'high' || stress === 'very_high' || stress === 'chronic_stress') {
                suggestions += `<li>مدیریت موثر استرس <span class="benefit">(+۵ تا +۱۰ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (heredity !== 'none' && heredity !== 'minor_distant') {
                suggestions += `<li>مشاوره پزشکی و غربالگری منظم (به ویژه برای سوابق ارثی) <span class="benefit">(+۳ تا +۸ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (job === 'high_risk' || job === 'very_high_risk' || job === 'extreme_risk') {
                suggestions += `<li>کاهش خطرات شغلی یا استفاده از ایمنی کامل <span class="benefit">(+۴ تا +۱۰ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (bmi === 'overweight' || bmi === 'obese_class1' || bmi === 'obese_class2' || bmi === 'morbidly_obese' || bmi === 'underweight') {
                suggestions += `<li>رسیدن به وزن ایده‌آل و سالم <span class="benefit">(+۳ تا +۱۲ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (checkup === 'rarely' || checkup === 'never' || checkup === 'avoid_doctors') {
                suggestions += `<li>انجام چکاپ‌های منظم پزشکی <span class="benefit">(+۴ تا +۱۰ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (pollution === 'high' || pollution === 'very_high' || pollution === 'extreme') {
                suggestions += `<li>کاهش مواجهه با آلودگی هوا <span class="benefit">(+۳ تا +۷ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (social === 'limited' || social === 'mostly_alone' || social === 'isolated') {
                suggestions += `<li>تقویت روابط اجتماعی و خانوادگی <span class="benefit">(+۳ تا +۷ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (outlook === 'sometimes_negative' || outlook === 'often_negative' || outlook === 'pessimistic_depressed') {
                suggestions += `<li>تقویت روحیه مثبت و خوش‌بینی <span class="benefit">(+۲ تا +۶ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (education === 'illiterate' || education === 'elementary') {
                suggestions += `<li>ادامه تحصیل و یادگیری مداوم <span class="benefit">(+۱ تا +۴ سال)</span></li>`;
                hasSuggestions = true;
            }
            if (medication === 'serious_condition' || medication === 'multiple_serious' || medication === 'lifelong_critical') {
                suggestions += `<li>مدیریت دقیق بیماری‌های مزمن و مصرف صحیح داروها <span class="benefit">(+۴ تا +۱۰ سال)</span></li>`;
                hasSuggestions = true;
            }

            suggestions += "</ul></div>";

            if (hasSuggestions) {
                resultHtml += suggestions;
            } else {
                resultHtml += "<p class='suggestions-list'>با توجه به انتخاب‌های شما، سبک زندگی فعلی‌تان بسیار مطلوب است. به همین روند ادامه دهید و از زندگی لذت ببرید!</p>";
            }

            resultHtml += `<p class="disclaimer">باز هم تأکید می‌شود که این فقط یک پیش‌بینی سرگرم‌کننده است و هیچ پایه علمی ندارد.</p>`;
            document.getElementById('result').innerHTML = resultHtml;
        });
    </script>
</body>
</html>
