<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ابزارک‌های هوشمند</title>
    <link href="https://cdn.fontcdn.ir/Font/Persian/Shabnam/Shabnam.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Shabnam', 'Vazirmatn', sans-serif;
            background-color: #1a1a1a; /* Dark background */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #f0f0f0; /* Light text */
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- Dynamic Navbar Styles --- */
        .navbar {
            display: flex;
            justify-content: center;
            background-color: #2a2a2a; /* Slightly lighter dark */
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 950px;
            flex-wrap: wrap;
            gap: 10px;
            border: 1px solid #3a3a3a;
        }
        .nav-button {
            background-color: #3a3a3a;
            color: #e0e0e0;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-grow: 1;
            min-width: 130px;
            max-width: 190px;
            font-weight: 600;
            display: flex;
            flex-direction: column; /* Stack icon and text */
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            border: 1px solid transparent; /* Default transparent border */
        }
        .nav-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px; /* Border thickness */
            background-color: transparent;
            transition: background-color 0.3s ease;
        }

        /* Specific colors for each button's border and hover/active states */
        .nav-button[data-color="gold"]:before { background-color: #FFD700; } /* Gold */
        .nav-button[data-color="green"]:before { background-color: #28a745; } /* Green */
        .nav-button[data-color="orange"]:before { background-color: #FFA500; } /* Orange */
        .nav-button[data-color="purple"]:before { background-color: #800080; } /* Purple */
        .nav-button[data-color="blue"]:before { background-color: #1e90ff; } /* Blue */
        .nav-button[data-color="red"]:before { background-color: #dc3545; } /* Red */

        .nav-button:hover {
            background-color: #4a4a4a;
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
            color: #ffffff;
        }
        .nav-button.active {
            background-color: #5a5a5a;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(0, 0, 0, 0.3);
            transform: translateY(0);
            color: #ffffff;
            border-color: var(--button-color); /* Use CSS variable for active border */
        }
        .nav-button i {
            margin-bottom: 8px; /* Space between icon and text */
            margin-left: 0; /* Remove left margin for stacking */
            font-size: 1.3em;
            color: #bbb;
        }
        .nav-button.active i {
            color: #fff;
        }

        /* --- Common App Container Styles --- */
        .app-container {
            background-color: #2a2a2a; /* Darker grey background for containers */
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            padding: 30px;
            width: 100%;
            max-width: 450px;
            text-align: center;
            border: 1px solid #3a3a3a;
            display: none; /* Initially hidden */
            transition: all 0.4s ease-in-out;
        }
        .app-container h1 {
            margin-bottom: 25px;
            font-size: 1.8em;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
        }
        .input-group {
            margin-bottom: 20px;
            text-align: right;
            position: relative;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.95em;
            color: #e0e0e0;
        }
        .input-group input[type="number"],
        .input-group input[type="text"],
        .input-group select {
            width: calc(100% - 40px);
            padding: 12px 15px 12px 35px;
            border: 1px solid #555;
            border-radius: 8px;
            font-size: 1em;
            background-color: #3a3a3a;
            color: #f0f0f0;
            direction: ltr; /* Default for inputs */
            text-align: right;
            transition: border-color 0.3s, box-shadow 0.3s;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            padding-left: 45px;
        }

        .input-group select {
            width: calc(100% - 15px);
            padding-left: 15px; /* Adjust padding for select */
            direction: rtl; /* For Persian text in select */
            cursor: pointer;
        }
        .input-group select option {
            background-color: #3a3a3a; /* Darker background for options */
            color: #f0f0f0;
            padding: 8px;
        }

        .input-group input[type="number"]:focus,
        .input-group input[type="text"]:focus,
        .input-group select:focus {
            outline: none;
            border-color: #1e90ff; /* Default focus blue */
            box-shadow: 0 0 0 3px rgba(30, 144, 255, 0.3);
        }
        .input-group .icon {
            position: absolute;
            left: 12px;
            top: 50%; /* Center vertically with label and input */
            transform: translateY(calc(-50% + 12px)); /* Adjust for label height */
            color: #aaa;
            font-size: 1.1em;
            pointer-events: none; /* Make icon not clickable */
        }
        .input-group small {
            display: block;
            margin-top: 5px;
            color: #bbb;
            font-size: 0.8em;
            text-align: right;
        }
        .flex-inputs {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }
        .flex-inputs .input-group {
            flex: 1;
            margin-bottom: 0;
        }
        .flex-inputs .input-group label {
            white-space: nowrap;
        }
        .app-container button {
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.05em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            font-weight: 600;
            margin-top: 25px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
        }
        .app-container button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.5);
        }
        .result {
            margin-top: 30px;
            background-color: #3a3a3a;
            border: 1px solid #555;
            border-radius: 10px;
            padding: 20px;
            font-size: 1.1em;
            color: #f0f0f0;
            font-weight: 600;
            display: none;
            text-align: right;
            line-height: 1.8;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.4);
        }
        .result div {
            margin-bottom: 8px;
        }
        .result span {
            font-size: 1em;
            margin-right: 8px;
            font-weight: 700;
        }
        .result .small-text {
            font-size: 0.75em;
            color: #bbb;
            display: block;
            margin-top: 15px;
            font-weight: normal;
        }
        .personality-text {
            font-size: 1.05em;
            font-weight: normal;
            margin-top: 20px;
            text-align: justify;
            background-color: #3a3a3a;
            border: 1px dashed #555;
            padding: 20px;
            border-radius: 10px;
            color: #e0e0e0;
            line-height: 1.7;
        }
        .personality-text h2 {
            color: #FFD700; /* Gold for titles in personality */
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
        }
        .personality-text h3 {
            color: #ffa500; /* Orange for subheadings */
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
            text-align: right;
        }
        .personality-text ul {
            list-style-type: disc;
            padding-right: 25px;
            margin-bottom: 15px;
        }
        .personality-text li {
            margin-bottom: 5px;
            color: #e0e0e0;
        }
        .positive-point {
            color: #8aff8a; /* Lighter green */
            font-weight: 600;
        }
        .negative-point {
            color: #ff8a8a; /* Lighter red */
            font-weight: 600;
        }
        .comparison-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed #555;
            text-align: right;
        }
        .comparison-section label {
            font-size: 0.95em;
            color: #e0e0e0;
            display: block;
            margin-bottom: 12px;
        }
        .comparison-section select {
            width: calc(100% - 15px);
            padding: 10px 10px 10px 10px;
            border: 1px solid #555;
            border-radius: 8px;
            font-size: 0.95em;
            direction: rtl;
            background-color: #3a3a3a;
            color: #f0f0f0;
            cursor: pointer;
            margin-bottom: 15px;
        }
        .comparison-section button {
            margin-top: 15px;
            background-color: #1e90ff; /* Blue for comparison button */
        }
        .comparison-result {
            margin-top: 20px;
            background-color: #3a3a3a;
            border: 1px solid #555;
            border-radius: 10px;
            padding: 20px;
            text-align: right;
        }
        .comparison-result h3 {
            font-size: 1.2em;
            color: #FFD700; /* Gold */
            margin-bottom: 15px;
            text-align: center;
        }
        .comparison-result p {
            font-size: 0.95em;
            line-height: 1.7;
            color: #e0e0e0;
            margin-bottom: 10px;
        }

        /* --- Loan/Deposit Calculator Specific Styles --- */
        .tab-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            border-bottom: 1px solid #555;
            padding-bottom: 10px;
        }
        .tab-button {
            background-color: #3a3a3a;
            border: 1px solid #555;
            padding: 10px 18px;
            cursor: pointer;
            font-size: 0.95em;
            border-radius: 8px 8px 0 0;
            margin: 0 3px;
            transition: all 0.2s ease;
            color: #e0e0e0;
        }
        .tab-button.active {
            background-color: #800080; /* Purple */
            color: white;
            border-color: #800080;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        }
        .loan-deposit-content {
            display: none;
        }
        .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 10px 15px;
            border: 1px solid #555;
        }
        .toggle-switch span {
            font-size: 0.95em;
            color: #e0e0e0;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 45px;
            height: 25px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #666;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 25px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 19px;
            width: 19px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #800080; /* Purple */
        }
        input:focus + .slider {
            box-shadow: 0 0 1px #800080;
        }
        input:checked + .slider:before {
            -webkit-transform: translateX(20px);
            -ms-transform: translateX(20px);
            transform: translateX(20px);
        }

        /* --- Specific Form Colors --- */

        /* Gold Calculator */
        #goldCalculator h1 { color: #FFD700; }
        #goldCalculator .input-group input:focus { border-color: #FFD700; box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3); }
        #goldCalculator button { background-color: #FFD700; color: #333; }
        #goldCalculator button:hover { background-color: #e6c200; }
        #goldCalculator .result span { color: #FFD700; }

        /* BMI Calculator */
        #bmiCalculator h1 { color: #28a745; }
        #bmiCalculator .input-group input:focus { border-color: #28a745; box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.3); }
        #bmiCalculator button { background-color: #28a745; }
        #bmiCalculator button:hover { background-color: #218838; }
        #bmiCalculator .result span { color: #28a745; }

        /* Personality Test */
        #personalityTest h1 { color: #FFA500; }
        #personalityTest .input-group input:focus,
        #personalityTest .input-group select:focus { border-color: #FFA500; box-shadow: 0 0 0 3px rgba(255, 165, 0, 0.3); }
        #personalityTest button { background-color: #FFA500; }
        #personalityTest button:hover { background-color: #e69500; }
        #personalityTest .result span { color: #FFA500; }
        #personalityTest .comparison-section button { background-color: #1e90ff; }
        #personalityTest .comparison-section button:hover { background-color: #1a7ae0; }

        /* Loan/Deposit Calculator */
        #loanDepositCalculator h1 { color: #800080; } /* Purple */
        #loanDepositCalculator .input-group input:focus,
        #loanDepositCalculator .input-group select:focus { border-color: #800080; box-shadow: 0 0 0 3px rgba(128, 0, 128, 0.3); }
        #loanDepositCalculator button { background-color: #800080; }
        #loanDepositCalculator button:hover { background-color: #6a006a; }
        #loanDepositCalculator .result span { color: #800080; }

        /* Currency Converter */
        #currencyConverter h1 { color: #1e90ff; } /* Dodger Blue */
        #currencyConverter .input-group input:focus,
        #currencyConverter .input-group select:focus { border-color: #1e90ff; box-shadow: 0 0 0 3px rgba(30, 144, 255, 0.3); }
        #currencyConverter button { background-color: #1e90ff; }
        #currencyConverter button:hover { background-color: #1a7ae0; }
        #currencyConverter .result span { color: #1e90ff; }

        /* Hypothetical Services Calculator */
        #hypotheticalServicesCalculator h1 { color: #dc3545; } /* Red */
        #hypotheticalServicesCalculator .input-group input:focus { border-color: #dc3545; box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.3); }
        #hypotheticalServicesCalculator button { background-color: #dc3545; }
        #hypotheticalServicesCalculator button:hover { background-color: #c82333; }
        #hypotheticalServicesCalculator .result span { color: #dc3545; }
        #hypotheticalServicesCalculator .category-item {
            font-weight: bold;
            color: #FFD700; /* Gold for category names */
            margin-bottom: 8px;
        }
        #hypotheticalServicesCalculator .category-range {
            font-size: 0.85em;
            color: #aaa;
            margin-right: 5px;
            font-weight: normal;
        }
        #hypotheticalServicesCalculator ul {
            text-align: right;
            list-style-type: none; /* No default bullet */
            padding-right: 0;
            margin-top: 15px;
            color: #f0f0f0;
            font-size: 0.95em;
        }
        #hypotheticalServicesCalculator ul li {
            margin-bottom: 10px;
            position: relative;
            padding-right: 20px; /* Space for custom bullet */
        }
        #hypotheticalServicesCalculator ul li::before {
            content: "•"; /* Custom bullet point */
            color: #FFD700; /* Gold bullet */
            position: absolute;
            right: 0;
            top: 0;
            font-size: 1.2em;
        }
        #hypotheticalServicesCalculator .comparison-title {
            color: #1e90ff; /* Blue for comparison title */
            font-size: 1.1em;
            margin-top: 25px;
            margin-bottom: 10px;
            font-weight: 700;
        }
        .food-comparison-list {
            list-style-type: none;
            padding-right: 0;
            margin-top: 10px;
        }
        .food-comparison-list li {
            font-size: 0.9em;
            color: #ccc;
            margin-bottom: 8px;
            line-height: 1.5;
            position: relative;
            padding-right: 18px;
        }
        .food-comparison-list li::before {
            content: "•";
            color: #28a745; /* Green bullet for food */
            position: absolute;
            right: 0;
            top: 0;
            font-size: 1.1em;
        }
        .food-comparison-list strong {
            color: #eee;
        }
        .suggestion-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed #555;
            text-align: right;
        }
        .suggestion-section h3 {
            color: #FFA500; /* Orange for suggestion titles */
            font-size: 1.3em;
            margin-bottom: 15px;
            text-align: center;
        }
        .suggestion-section p {
            font-size: 0.95em;
            line-height: 1.8;
            color: #e0e0e0;
            margin-bottom: 10px;
        }
        .suggestion-section ul {
            list-style-type: disc;
            padding-right: 25px;
            margin-bottom: 15px;
        }
        .suggestion-section li {
            margin-bottom: 8px;
            color: #e0e0e0;
        }
        .suggestion-section .highlight {
            color: #8aff8a;
            font-weight: 700;
        }


        /* Media Queries for Responsiveness */
        @media (max-width: 768px) {
            .navbar {
                padding: 8px;
                max-width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            .nav-button {
                margin: 4px;
                flex-basis: calc(50% - 8px); /* Two buttons per row with gap */
                min-width: unset;
                font-size: 0.85em;
                padding: 10px 15px;
            }
            .app-container {
                padding: 20px;
                max-width: 380px;
            }
            .input-group input[type="number"],
            .input-group input[type="text"],
            .input-group select {
                width: calc(100% - 30px);
                padding: 10px 10px 10px 30px;
            }
            .input-group .icon {
                left: 8px;
                font-size: 1em;
                transform: translateY(calc(-50% + 10px));
            }
            .input-group select {
                padding-left: 8px;
            }
            .personality-text {
                font-size: 0.95em;
                padding: 15px;
            }
            .tab-button {
                font-size: 0.9em;
                padding: 8px 12px;
            }
        }

        @media (max-width: 480px) {
            .nav-button {
                flex-basis: calc(100% - 8px); /* One button per row on very small screens */
            }
            .flex-inputs {
                flex-direction: column;
                gap: 15px;
            }
            .flex-inputs .input-group {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <h3 style="margin-bottom: 25px; color: #f0f0f0;">بسم الله الرحمن الرحیم</h3>
    
    <div class="navbar">
        <button class="nav-button" data-color="gold" onclick="showSection('goldCalculator', this)"><i class="fas fa-gem"></i><span>قیمت طلا</span></button>
        <button class="nav-button" data-color="green" onclick="showSection('bmiCalculator', this)"><i class="fas fa-calculator"></i><span>شاخص وزن</span></button>
        <button class="nav-button" data-color="orange" onclick="showSection('personalityTest', this)"><i class="fas fa-brain"></i><span>تست شخصیت</span></button>
        <button class="nav-button" data-color="purple" onclick="showSection('loanDepositCalculator', this)"><i class="fas fa-university"></i><span>سود/وام</span></button>
        <button class="nav-button" data-color="blue" onclick="showSection('currencyConverter', this)"><i class="fas fa-exchange-alt"></i><span>مبدل ارز</span></button>
        <button class="nav-button" data-color="red" onclick="showSection('hypotheticalServicesCalculator', this)"><i class="fas fa-heart"></i><span>شاخص لذت</span></button>
    </div>

    
    <div id="goldCalculator" class="app-container">
        <h1><i class="fas fa-gem" style="margin-left: 10px;"></i>محاسبه‌گر هوشمند طلا</h1>
        
        <div class="input-group">
            <label for="goldPriceToman">قیمت روز طلا (تومان در گرم):</label>
            <input type="number" id="goldPriceToman" placeholder="مثال: 3,200,000" min="0">
            <i class="fas fa-coins icon"></i>
        </div>

        <div class="input-group">
            <label for="usdExchangeRate">نرخ برابری دلار به تومان:</label>
            <input type="number" id="usdExchangeRate" placeholder="مثال: 60000" min="1000">
            <i class="fas fa-dollar-sign icon"></i>
            <small>نرخ هر دلار چند تومان است.</small>
        </div>

        <div class="input-group">
            <label>وزن طلا:</label>
            <div class="flex-inputs">
                <div class="input-group">
                    <input type="number" id="goldWeightGram" placeholder="گرم" min="0" step="any">
                    <i class="fas fa-weight-hanging icon"></i>
                </div>
                <div class="input-group">
                    <input type="number" id="goldWeightSoot" placeholder="سوت (تا 999)" min="0" max="999" step="any">
                    <i class="fas fa-balance-scale icon"></i>
                </div>
            </div>
            <small>هر گرم ۱۰۰۰ سوت است. می‌توانید فقط گرم یا سوت را وارد کنید.</small>
        </div>
        
        <div class="input-group">
            <label for="wagePercent">درصد اجرت کار (اختیاری):</label>
            <input type="number" id="wagePercent" placeholder="مثال: 20 (فقط عدد)" min="0" max="100">
            <i class="fas fa-percent icon"></i>
            <small>اگر اجرت ندارد، این فیلد را خالی بگذارید یا ۰ وارد کنید.</small>
        </div>
        
        <button onclick="calculateGoldPrice()">محاسبه قیمت</button>
        
        <div class="result" id="goldResultDiv">
            <div><span>قیمت نهایی:</span> <span id="finalPriceToman"></span> تومان</div>
            <div><span>قیمت نهایی:</span> <span id="finalPriceDollar"></span> دلار</div>
        </div>
    </div>

    
    <div id="bmiCalculator" class="app-container">
        <h1><i class="fas fa-calculator" style="margin-left: 10px;"></i>محاسبه شاخص توده بدنی (BMI)</h1>
        
        <div class="input-group">
            <label for="weight">وزن (کیلوگرم):</label>
            <input type="number" id="weight" placeholder="مثال: 70" min="1" step="any">
            <i class="fas fa-weight icon"></i>
        </div>
        
        <div class="input-group">
            <label for="height">قد (متر):</label>
            <input type="number" id="height" placeholder="مثال: 1.75" min="0.1" step="0.01">
            <i class="fas fa-ruler-vertical icon"></i>
            <small>مثال: ۱۷۵ سانتی‌متر را ۱.۷۵ متر وارد کنید.</small>
        </div>
        
        <button onclick="calculateBMI()">محاسبه BMI</button>
        
        <div class="result" id="bmiResultDiv">
            <div><span>شاخص BMI شما:</span> <span id="bmiValue"></span></div>
            <div><span>وضعیت:</span> <span id="bmiStatus"></span></div>
        </div>
    </div>

    
    <div id="personalityTest" class="app-container">
        <h1><i class="fas fa-brain" style="margin-left: 10px;"></i>تست شخصیت‌شناسی</h1>

        <div class="input-group">
            <label for="userBirthMonth">ماه تولد شما:</label>
            <select id="userBirthMonth"></select>
            <i class="fas fa-calendar-star icon"></i>
        </div>

        <div class="input-group">
            <label for="userGender">جنسیت شما:</label>
            <select id="userGender">
                <option value="">انتخاب کنید</option>
                <option value="مرد">مرد</option>
                <option value="زن">زن</option>
                <option value="دیگر">دیگر</option>
            </select>
            <i class="fas fa-venus-mars icon"></i>
        </div>

        <button onclick="analyzePersonality()">تحلیل شخصیت</button>

        <div class="result" id="personalityResultDiv">
            <div class="personality-text" id="personalityText"></div>
            <div class="comparison-section">
                <label for="compareMonth">مقایسه با متولدین ماه:</label>
                <select id="compareMonth"></select>
                <button onclick="comparePersonalities()">مقایسه شخصیت‌ها</button>
                <div class="result comparison-result" id="comparisonResultDiv">
                    <div id="comparisonText"></div>
                </div>
            </div>
        </div>
    </div>

    
    <div id="loanDepositCalculator" class="app-container">
        <h1><i class="fas fa-university" style="margin-left: 10px;"></i>محاسبه‌گر بانکی</h1>
        
        <div class="tab-buttons">
            <button class="tab-button active" onclick="showLoanDepositTab('deposit', this)">سود سپرده</button>
            <button class="tab-button" onclick="showLoanDepositTab('loan', this)">اقساط وام</button>
        </div>

        
        <div id="depositContent" class="loan-deposit-content" style="display: block;">
            <div class="input-group">
                <label for="depositAmount">مبلغ سپرده (تومان):</label>
                <input type="number" id="depositAmount" placeholder="مثال: 100,000,000" min="0">
                <i class="fas fa-money-bill-wave icon"></i>
            </div>
            <div class="input-group">
                <label for="depositInterestRate">نرخ سود سالانه (درصد):</label>
                <input type="number" id="depositInterestRate" placeholder="مثال: 18" min="0" max="100" step="0.1">
                <i class="fas fa-percent icon"></i>
            </div>

            <div class="toggle-switch">
                <span>محاسبه سود روزشمار؟</span>
                <label class="switch">
                    <input type="checkbox" id="dailyInterestToggle">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="input-group">
                <label for="depositDurationDays" id="depositDurationLabel">مدت زمان سپرده (ماه):</label>
                <input type="number" id="depositDurationDays" placeholder="مثال: 12" min="1">
                <i class="fas fa-calendar-alt icon"></i>
            </div>

            <button onclick="calculateDepositInterest()">محاسبه سود سپرده</button>
            <div class="result" id="depositResultDiv">
                <div><span>سود کل:</span> <span id="totalDepositInterest"></span> تومان</div>
                <div><span>مبلغ نهایی با سود:</span> <span id="finalDepositAmount"></span> تومان</div>
            </div>
        </div>

        
        <div id="loanContent" class="loan-deposit-content">
            <div class="input-group">
                <label for="loanAmount">مبلغ وام (تومان):</label>
                <input type="number" id="loanAmount" placeholder="مثال: 50,000,000" min="0">
                <i class="fas fa-money-check-alt icon"></i>
            </div>
            <div class="input-group">
                <label for="loanInterestRate">نرخ سود سالانه (درصد):</label>
                <input type="number" id="loanInterestRate" placeholder="مثال: 23" min="0" max="100" step="0.1">
                <i class="fas fa-percent icon"></i>
            </div>
            <div class="input-group">
                <label for="loanDurationMonths">مدت بازپرداخت (ماه):</label>
                <input type="number" id="loanDurationMonths" placeholder="مثال: 60" min="1">
                <i class="fas fa-calendar-check icon"></i>
            </div>
            <button onclick="calculateLoanInstallment()">محاسبه اقساط وام</button>
            <div class="result" id="loanResultDiv">
                <div><span>مبلغ هر قسط:</span> <span id="monthlyInstallment"></span> تومان</div>
                <div><span>کل سود پرداختی:</span> <span id="totalLoanInterest"></span> تومان</div>
                <div><span>مجموع پرداختی:</span> <span id="totalPayment"></span> تومان</div>
            </div>
        </div>
    </div>

    
    <div id="currencyConverter" class="app-container">
        <h1><i class="fas fa-exchange-alt" style="margin-left: 10px;"></i>مبدل ارز</h1>
        
        <div class="input-group">
            <label for="amountToConvert">مبلغ:</label>
            <input type="number" id="amountToConvert" placeholder="مثال: 100" min="0">
            <i class="fas fa-money-bill-wave icon"></i>
        </div>
        
        <div class="input-group">
            <label for="fromCurrency">از واحد:</label>
            <select id="fromCurrency"></select>
            <i class="fas fa-chevron-circle-down icon"></i>
        </div>

        <div class="input-group">
            <label for="toCurrency">به واحد:</label>
            <select id="toCurrency"></select>
            <i class="fas fa-chevron-circle-down icon"></i>
        </div>

        <div class="input-group" id="exchangeRateInputGroup">
            <label for="exchangeRate">نرخ تبدیل (1 <span id="fromCurrencySymbol"></span> = ? <span id="toCurrencySymbol"></span>):</label>
            <input type="number" id="exchangeRate" placeholder="مثال: 60000 (برای دلار به تومان)" min="0" step="any">
            <i class="fas fa-coins icon"></i>
            <small>نرخ تبدیل ارز مبدأ به ارز مقصد را وارد کنید.</small>
        </div>
        
        <button onclick="convertCurrency()">تبدیل ارز</button>
        
        <div class="result" id="currencyResultDiv">
            <div><span>مبلغ تبدیل شده:</span> <span id="convertedAmount"></span></div>
        </div>
    </div>

    
    <div id="hypotheticalServicesCalculator" class="app-container">
        <h1><i class="fas fa-heart" style="margin-left: 10px;"></i>شاخص لذت</h1>
        
        <div class="input-group">
            <label for="dollarExchangeRateHypothetical">نرخ روز دلار به تومان:</label>
            <input type="number" id="dollarExchangeRateHypothetical" placeholder="مثال: 60000" min="1000">
            <i class="fas fa-dollar-sign icon"></i>
            <small>نرخ هر دلار چند تومان است.</small>
        </div>

        <div class="input-group">
            <label for="hypotheticalBudget">درآمد ماهیانه شما (تومان):</label>
            <input type="number" id="hypotheticalBudget" placeholder="مثال: 15,000,000" min="0">
            <i class="fas fa-coins icon"></i>
        </div>

        <div class="input-group">
            <label for="userAge">سن شما:</label>
            <input type="number" id="userAge" placeholder="مثال: 30" min="10" max="100">
            <i class="fas fa-user icon"></i>
        </div>

        <div class="input-group">
            <label for="userOccupation">شغل شما:</label>
            <select id="userOccupation">
                <option value="">انتخاب کنید</option>
                <option value="کارمند">کارمند</option>
                <option value="معلم">معلم</option>
                <option value="دانشجو">دانشجو</option>
                <option value="آزادکار/فریلنسر">آزادکار/فریلنسر</option>
                <option value="پزشک/پرستار">پزشک/پرستار</option>
                <option value="مهندس">مهندس</option>
                <option value="راننده">راننده</option>
                <option value="فروشنده">فروشنده</option>
                <option value="کارگر">کارگر</option>
                <option value="خانهدار">خانه‌دار</option>
                <option value="بازنشسته">بازنشسته</option>
                <option value="کشاورز">کشاورز</option>
                <option value="معمار">معمار</option>
                <option value="برنامهنویس">برنامه‌نویس</option>
                <option value="وکیل">وکیل</option>
                <option value="هنرمند">هنرمند</option>
                <option value="مدیر">مدیر</option>
                <option value="سرباز/نظامی">سرباز/نظامی</option>
                <option value="صنعتگر">صنعتگر</option>
                <option value="بیکار">بیکار</option>
            </select>
            <i class="fas fa-briefcase icon"></i>
        </div>

        <div class="input-group">
            <label for="maritalStatus">وضعیت تأهل:</label>
            <select id="maritalStatus">
                <option value="">انتخاب کنید</option>
                <option value="مجرد">مجرد</option>
                <option value="متاهل">متأهل</option>
            </select>
            <i class="fas fa-ring icon"></i>
        </div>

        <div class="input-group" id="childrenCountGroup" style="display: none;">
            <label for="childrenCount">تعداد فرزندان:</label>
            <input type="number" id="childrenCount" placeholder="مثال: 1" min="0">
            <i class="fas fa-child icon"></i>
        </div>

        <div class="input-group">
            <label for="livingArea">محل زندگی:</label>
            <select id="livingArea">
                <option value="">انتخاب کنید</option>
                <option value="شهری">شهری</option>
                <option value="روستایی">روستایی</option>
            </select>
            <i class="fas fa-city icon"></i>
        </div>

        <div class="input-group">
            <label for="houseOwnership">وضعیت سکونت:</label>
            <select id="houseOwnership">
                <option value="">انتخاب کنید</option>
                <option value="مالک">صاحب‌خانه</option>
                <option value="مستاجر">مستأجر</option>
            </select>
            <i class="fas fa-home icon"></i>
        </div>
        
        <button onclick="calculateHypotheticalServices()">تحلیل بودجه لذت</button>
        
        <div class="result" id="hypotheticalServicesResultDiv">
            <div class="suggestion-section" id="budgetSuggestion">
                <h3></h3>
                <p></p>
                <ul></ul>
            </div>

            <div style="margin-top: 25px; padding-top: 15px; border-top: 1px dashed #555;">
                <p style="font-size: 0.9em; color: #aaa; text-align: center; line-height: 1.6;">
                    برای رسیدن به اهداف مالی بزرگ‌تر و تجربه‌ی لذت‌های پایدارتر در زندگی، می‌توانید بخشی از این بودجه را به **سرمایه‌گذاری یا پس‌انداز** اختصاص دهید. این مسیر به شما کمک می‌کند تا در بلندمدت، زندگی رضایت‌بخش‌تری را تجربه کنید.
                </p>
            </div>
        </div>
    </div>
    
    <script>
        // --- Navigation Logic (Concise) ---
        function showSection(sectionId, clickedButton) {
            document.querySelectorAll('.app-container').forEach(s => s.style.display = 'none');
            document.querySelectorAll('.nav-button').forEach(b => b.classList.remove('active'));
            document.getElementById(sectionId).style.display = 'block';
            clickedButton.classList.add('active');
            document.querySelectorAll('.result').forEach(r => r.style.display = 'none');
            if (sectionId === 'personalityTest') { populatePersonalityMonths(); populateCompareMonths(); }
            if (sectionId === 'loanDepositCalculator') { showLoanDepositTab('deposit', document.querySelector('#loanDepositCalculator .tab-buttons .tab-button:first-child')); }
            if (sectionId === 'currencyConverter') { populateCurrencies(); updateExchangeRateLabels(); }
        }

        // --- Gold Calculator Logic (Concise) ---
        function calculateGoldPrice() {
            const [goldPrice, usdRate, goldGram, goldSoot, wage] = 
                ['goldPriceToman', 'usdExchangeRate', 'goldWeightGram', 'goldWeightSoot', 'wagePercent']
                .map(id => parseFloat(document.getElementById(id).value) || 0);

            if (!goldPrice || !usdRate || (goldGram + goldSoot <= 0)) { alert('لطفاً تمامی فیلدهای الزامی را پر کنید.'); return; }

            const totalWeight = goldGram + (goldSoot / 1000);
            const wageAmount = (goldPrice * (wage / 100)) * totalWeight;
            const profitAmount = (goldPrice * 0.07) * totalWeight;
            const taxAmount = (wageAmount + profitAmount) * 0.10;
            const finalPriceToman = (goldPrice * totalWeight) + wageAmount + profitAmount + taxAmount;
            const finalPriceDollar = finalPriceToman / usdRate;

            document.getElementById('finalPriceToman').innerText = finalPriceToman.toLocaleString('fa-IR');
            document.getElementById('finalPriceDollar').innerText = finalPriceDollar.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById('goldResultDiv').style.display = 'block';
        }

        // --- BMI Calculator Logic (Concise) ---
        function calculateBMI() {
            const [weight, height] = ['weight', 'height'].map(id => parseFloat(document.getElementById(id).value));

            if (!weight || !height) { alert('لطفاً وزن و قد را به درستی وارد کنید.'); return; }

            const bmi = weight / (height * height);
            let status = bmi < 18.5 ? 'کم‌وزنی' : bmi <= 24.9 ? 'وزن نرمال' : bmi <= 29.9 ? 'اضافه‌وزن' : bmi <= 34.9 ? 'چاقی (درجه ۱)' : bmi <= 39.9 ? 'چاقی شدید (درجه ۲)' : 'چاقی مفرط (درجه ۳)';

            document.getElementById('bmiValue').innerText = bmi.toLocaleString('fa-IR', { minimumFractionDigits: 1, maximumFractionDigits: 1 });
            document.getElementById('bmiStatus').innerText = status;
            document.getElementById('bmiResultDiv').style.display = 'block';
        }

        // --- Personality Test Logic (Concise) ---
        const solarMonths = [
            { value: 'فروردین', text: 'فروردین (حمل)' }, { value: 'اردیبهشت', text: 'اردیبهشت (ثور)' },
            { value: 'خرداد', text: 'خرداد (جوزا)' }, { value: 'تیر', text: 'تیر (سرطان)' },
            { value: 'مرداد', text: 'مرداد (اسد)' }, { value: 'شهریور', text: 'شهریور (سنبله)' },
            { value: 'مهر', text: 'مهر (میزان)' }, { value: 'آبان', text: 'آبان (عقرب)' },
            { value: 'آذر', text: 'آذر (قوس)' }, { value: 'دی', text: 'دی (جدی)' },
            { value: 'بهمن', text: 'بهمن (دلو)' }, { value: 'اسفند', text: 'اسفند (حوت)' }
        ];

        const personalityTraits = {
            'فروردین': { 'قوت': ["شروعکننده", "خلاق", "اجتماعی", "خوشبین", "کنجکاو", "آزاداندیش"], 'ضعف': ["زود خسته", "بینظم", "سطحی", "عجول", "غیرواقعبین", "مسئولیتگریز"] },
            'اردیبهشت': { 'قوت': ["منظم", "وفادار", "صبور", "واقعبین", "سختکوش", "محافظهکار"], 'ضعف': ["سختگیر", "مقاوم به تغییر", "مادیگرا", "کینهتوز", "خشک", "انعطافناپذیر"] },
            'خرداد': { 'قوت': ["کنجکاو", "سازگار", "شوخطبع", "همدل", "اجتماعی", "مثبتاندیش"], 'ضعف': ["پرحرف", "بیقرار", "سطحینگر", "فراموشکار", "زود بیعلاقه", "غیرقابل پیشبینی"] },
            'تیر': { 'قوت': ["عاطفی", "خانوادهدوست", "خلاق", "وفادار", "غریزه قوی", "عمیق"], 'ضعف': ["حساس", "وابسته", "کمالگرا", "احساساتی", "غیرتی", "درونگرا"] },
            'مرداد': { 'قوت': ["قوی", "رهبر", "صریح", "متعهد", "مسئولیتپذیر", "جاهطلب"], 'ضعف': ["مغرور", "سلطهجو", "کینهتوز", "سختگیر", "انعطافناپذیر", "فشارآور"] },
            'شهریور': { 'قوت': ["منظم", "کوشا", "عملی", "وفادار", "انتقادپذیر", "مسئولیتپذیر"], 'ضعف': ["کمالگرا", "ایرادگیر", "محافظهکار", "منتقد", "سختگیر", "وسواس"] },
            'مهر': { 'قوت': ["منصف", "دیپلماتیک", "جذاب", "اجتماعی", "انعطافپذیر", "رمانتیک"], 'ضعف': ["تودار", "مردد", "وابسته", "فرار از تعارض", "سطحی", "سازشکار"] },
            'آبان': { 'قوت': ["مرموز", "شهودی", "پرشور", "مصمم", "وفادار", "رازدار"], 'ضعف': ["کینهتوز", "کنترلگر", "بدبین", "افراطی", "انعطافناپذیر", "پنهانکار"] },
            'آذر': { 'قوت': ["ماجراجو", "خوشبین", "صادق", "اجتماعی", "انعطافپذیر", "انرژیبخش"], 'ضعف': ["بیتعهد", "سطحینگر", "فراموشکار", "غیرقابل پیشبینی", "بیخیال", "عدم پایداری"] },
            'دی': { 'قوت': ["جدی", "منضبط", "صبور", "سختکوش", "وفادار", "محکم"], 'ضعف': ["سرد", "یکدنده", "ترسو", "منتقد", "خشک", "فشارآور"] },
            'بهمن': { 'قوت': ["خلاق", "انقلابی", "بشردوست", "کنجکاو", "متعهد", "مرموز"], 'ضعف': ["غیرقابل پیشبینی", "سرسخت", "غیرمنطقی", "افراطی", "کمتحمل", "منزوی"] },
            'اسفند': { 'قوت': ["خیالپرداز", "حساس", "رمانتیک", "مهربان", "شهودی", "انعطافپذیر"], 'ضعف': ["زودرنج", "غیرواقعبین", "غیرقابل پیشبینی", "فراموشکار", "وابسته", "منزوی"] }
        };

        const getRandomElements = (arr, count) => arr.sort(() => 0.5 - Math.random()).slice(0, count);

        function populatePersonalityMonths() {
            [document.getElementById('userBirthMonth'), document.getElementById('compareMonth')].forEach(select => {
                select.innerHTML = select.id === 'userBirthMonth' ? '<option value="">ماه تولد شما را انتخاب کنید</option>' : '<option value="">برای مقایسه انتخاب کنید</option>';
                solarMonths.forEach(m => select.appendChild(new Option(m.text, m.value)));
            });
        }
        const populateCompareMonths = populatePersonalityMonths; // Re-use

        function analyzePersonality() {
            const [birthMonth, gender] = ['userBirthMonth', 'userGender'].map(id => document.getElementById(id).value);
            if (!birthMonth || !gender) { alert('لطفاً ماه تولد و جنسیت خود را انتخاب کنید.'); return; }

            const traits = personalityTraits[birthMonth];
            const pos = getRandomElements(traits['قوت'], Math.floor(Math.random() * 2) + 3); // 3-4 positives
            const neg = getRandomElements(traits['ضعف'], Math.floor(Math.random() * 2) + 2); // 2-3 negatives

            const html = `<h2>شخصیت متولدین ماه ${birthMonth}</h2><h3>نقاط قوت شما:</h3><ul>${pos.map(t => `<li class="positive-point">${t}</li>`).join('')}</ul><h3>نقاط قابل بهبود شما:</h3><ul>${neg.map(t => `<li class="negative-point">${t}</li>`).join('')}</ul>`;
            document.getElementById('personalityText').innerHTML = html;
            document.getElementById('personalityResultDiv').style.display = 'block';
            document.getElementById('comparisonResultDiv').style.display = 'none';
        }

        function comparePersonalities() {
            const [userMonth, compareMonth] = ['userBirthMonth', 'compareMonth'].map(id => document.getElementById(id).value);
            if (!userMonth || !compareMonth || userMonth === compareMonth) { alert('لطفاً دو ماه متفاوت را برای مقایسه انتخاب کنید.'); return; }

            const [userT, compareT] = [personalityTraits[userMonth], personalityTraits[compareMonth]];
            const commonP = userT['قوت'].filter(t => compareT['قوت'].includes(t));
            const commonN = userT['ضعف'].filter(t => compareT['ضعف'].includes(t));
            const userUniqueP = userT['قوت'].filter(t => !compareT['قوت'].includes(t));
            const compareUniqueP = compareT['قوت'].filter(t => !userT['قوت'].includes(t));

            let html = `<h3>مقایسه شخصیت متولد ${userMonth} با متولد ${compareMonth}:</h3>`;
            html += `<p><strong>نقاط مشترک مثبت:</strong> ${commonP.length ? commonP.map(t => `<span class="positive-point">${t}</span>`).join('، ') : 'مورد قابل توجهی یافت نشد.'}</p>`;
            if (userUniqueP.length || compareUniqueP.length) {
                html += `<p><strong>نقاط قوت متفاوت:</strong></p><ul>`;
                userUniqueP.forEach(t => html += `<li>متولد ${userMonth}: ${t}</li>`);
                compareUniqueP.forEach(t => html += `<li>متولد ${compareMonth}: ${t}</li>`);
                html += `</ul>`;
            }
            html += `<p><strong>نقاط مشترک منفی (نیاز به توجه):</strong> ${commonN.length ? commonN.map(t => `<span class="negative-point">${t}</span>`).join('، ') : 'مورد قابل توجهی یافت نشد.'}</p>`;

            const compatibilityScore = commonP.length * 2 - commonN.length * 2;
            let compatibilityStatement = compatibilityScore >= 3 ? "شما و متولد این ماه شباهت‌های مثبتی زیادی دارید و احتمالاً به خوبی با هم کنار می‌آیید. تفاهم کلی شما بالاست." :
                                         compatibilityScore >= 0 ? "شما و متولد این ماه می‌توانید در بسیاری از زمینه‌ها تفاهم داشته باشید، با کمی درک متقابل و پذیرش تفاوت‌ها." :
                                         "ممکن است در برخی زمینه‌ها چالش‌هایی در تفاهم با متولد این ماه داشته باشید. نیاز به درک بیشتر از تفاوت‌ها و تلاش برای سازگاری است.";
            html += `<p><strong>نتیجه کلی تفاهم:</strong> ${compatibilityStatement}</p>`;
            document.getElementById('comparisonText').innerHTML = html;
            document.getElementById('comparisonResultDiv').style.display = 'block';
        }

        // --- Loan/Deposit Calculator Logic (Concise) ---
        function showLoanDepositTab(tabId, clickedButton) {
            document.querySelectorAll('.loan-deposit-content').forEach(c => c.style.display = 'none');
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId + 'Content').style.display = 'block';
            clickedButton.classList.add('active');
            document.getElementById('depositResultDiv').style.display = 'none';
            document.getElementById('loanResultDiv').style.display = 'none';
            if (tabId === 'deposit') { document.getElementById('depositAmount').value = ''; document.getElementById('depositInterestRate').value = ''; document.getElementById('depositDurationDays').value = ''; document.getElementById('dailyInterestToggle').checked = false; updateDepositDurationLabel(); }
            else { document.getElementById('loanAmount').value = ''; document.getElementById('loanInterestRate').value = ''; document.getElementById('loanDurationMonths').value = ''; }
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('dailyInterestToggle').addEventListener('change', updateDepositDurationLabel);
            updateDepositDurationLabel();
            // Event listener for marital status to show/hide children count
            document.getElementById('maritalStatus').addEventListener('change', function() {
                document.getElementById('childrenCountGroup').style.display = this.value === 'متاهل' ? 'block' : 'none';
            });
        });

        function updateDepositDurationLabel() {
            document.getElementById('depositDurationLabel').innerText = document.getElementById('dailyInterestToggle').checked ? 'مدت زمان سپرده (روز):' : 'مدت زمان سپرده (ماه):';
        }

        function calculateDepositInterest() {
            const [amount, rate, durationInput] = ['depositAmount', 'depositInterestRate', 'depositDurationDays'].map(id => parseFloat(document.getElementById(id).value));
            const isDaily = document.getElementById('dailyInterestToggle').checked;

            if (isNaN(amount) || amount <= 0 || isNaN(rate) || rate < 0 || isNaN(durationInput) || durationInput <= 0) { alert('لطفاً تمام فیلدها را با مقادیر صحیح وارد کنید.'); return; }

            let totalInterest, finalAmount;
            if (isDaily) {
                totalInterest = amount * (rate / 100) / 365 * durationInput;
            } else {
                totalInterest = amount * (rate / 100) / 12 * durationInput;
            }
            finalAmount = amount + totalInterest;

            document.getElementById('totalDepositInterest').innerText = totalInterest.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('finalDepositAmount').innerText = finalAmount.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('depositResultDiv').style.display = 'block';
        }

        function calculateLoanInstallment() {
            const [amount, rate, duration] = ['loanAmount', 'loanInterestRate', 'loanDurationMonths'].map(id => parseFloat(document.getElementById(id).value));
            if (isNaN(amount) || amount <= 0 || isNaN(rate) || rate < 0 || isNaN(duration) || duration <= 0) { alert('لطفاً تمام فیلدها را با مقادیر صحیح وارد کنید.'); return; }

            const monthlyRate = (rate / 100) / 12;
            let monthlyInstallment, totalInterest, totalPayment;

            if (monthlyRate === 0) {
                monthlyInstallment = amount / duration;
                totalInterest = 0;
                totalPayment = amount;
            } else {
                monthlyInstallment = amount * monthlyRate * Math.pow(1 + monthlyRate, duration) / (Math.pow(1 + monthlyRate, duration) - 1);
                totalPayment = monthlyInstallment * duration;
                totalInterest = totalPayment - amount;
            }
            
            document.getElementById('monthlyInstallment').innerText = monthlyInstallment.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('totalLoanInterest').innerText = totalInterest.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('totalPayment').innerText = totalPayment.toLocaleString('fa-IR', { minimumFractionDigits: 0, maximumFractionDigits: 0 });
            document.getElementById('loanResultDiv').style.display = 'block';
        }

        // --- Currency Converter Logic (Concise) ---
        const currencies = [
            { name: 'ریال ایران', symbol: 'IRR' }, { name: 'دلار آمریکا', symbol: 'USD' },
            { name: 'یورو', symbol: 'EUR' }, { name: 'پوند بریتانیا', symbol: 'GBP' },
            { name: 'درهم امارات', symbol: 'AED' }, { name: 'لیر ترکیه', symbol: 'TRY' },
            { name: 'یوان چین', symbol: 'CNY' }, { name: 'روپیه هند', symbol: 'INR' },
            { name: 'ین ژاپن', symbol: 'JPY' }
        ];

        function populateCurrencies() {
            ['fromCurrency', 'toCurrency'].forEach(id => {
                const select = document.getElementById(id);
                select.innerHTML = '';
                currencies.forEach(c => select.appendChild(new Option(`${c.name} (${c.symbol})`, c.symbol)));
            });
            document.getElementById('fromCurrency').value = 'USD';
            document.getElementById('toCurrency').value = 'IRR';
            document.getElementById('fromCurrency').addEventListener('change', updateExchangeRateLabels);
            document.getElementById('toCurrency').addEventListener('change', updateExchangeRateLabels);
            updateExchangeRateLabels();
        }

        function updateExchangeRateLabels() {
            const [from, to] = ['fromCurrency', 'toCurrency'].map(id => document.getElementById(id).value);
            document.getElementById('fromCurrencySymbol').innerText = from;
            document.getElementById('toCurrencySymbol').innerText = to;
            const exRateInput = document.getElementById('exchangeRate');
            const smallText = document.querySelector('#exchangeRateInputGroup small');
            if (from === 'USD' && to === 'IRR') { exRateInput.placeholder = "مثال: 60000"; smallText.innerText = "نرخ هر دلار چند تومان است."; }
            else if (from === 'IRR' && to === 'USD') { exRateInput.placeholder = "مثال: 0.000017"; smallText.innerText = "هر تومان چند دلار است (مثال: 1/60000)."; }
            else { exRateInput.placeholder = "مثال: 12345"; smallText.innerText = "نرخ تبدیل ارز مبدأ به ارز مقصد را وارد کنید."; }
            exRateInput.value = '';
        }

        function convertCurrency() {
            const [amount, from, to, rate] = ['amountToConvert', 'fromCurrency', 'toCurrency', 'exchangeRate'].map(id => {
                const el = document.getElementById(id);
                return el.type === 'select-one' ? el.value : parseFloat(el.value);
            });

            if (isNaN(amount) || amount <= 0 || !from || !to) { alert('لطفاً تمامی فیلدهای الزامی را پر کنید.'); return; }
            if (from === to) { document.getElementById('convertedAmount').innerText = `${amount.toLocaleString('fa-IR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ${from}`; document.getElementById('currencyResultDiv').style.display = 'block'; return; }
            if (isNaN(rate) || rate <= 0) { alert('لطفاً نرخ تبدیل را به درستی وارد کنید.'); return; }

            document.getElementById('convertedAmount').innerText = `${(amount * rate).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ${to}`;
            document.getElementById('currencyResultDiv').style.display = 'block';
        }

        // --- Hypothetical Services Calculator Logic (Accurate & Smart) ---
        const iranianServiceCostsUSD = {
            'تفریح سبک (مثل یک ناهار با دوست)': { min: 1, max: 5 }, // e.g., small cafe, simple meal
            'رویداد فرهنگی (مثلاً بلیط سینما و یک نوشیدنی)': { min: 1.5, max: 3 },
            'کلاس آموزشی آنلاین/ورزش‌های انفرادی (ماهانه)': { min: 2, max: 10 },
            'خرید یک کتاب جدید (مفید برای رشد)': { min: 1.5, max: 4 },
            'یک وعده غذای فست فود': { min: 2, max: 6 },
            'یک وعده غذای رستورانی (اقتصادی)': { min: 3, max: 6 },
            'یک وعده غذای رستورانی (لوکس)': { min: 6, max: 15 },
            'شهریه باشگاه ورزشی (ماهانه)': { min: 6, max: 20 },
            'یک بار استفاده از استخر': { min: 2, max: 4 },
            'اشتراک ماهانه نرم‌افزار کاربردی': { min: 2, max: 10 },
            'هزینه حمل و نقل (ماهانه)': { min: 6, max: 25 },
            'مسافرت (به ازای هر نفر در روز، اقتصادی)': { min: 20, max: 35 },
            'مسافرت (به ازای هر نفر در روز، رفاهی)': { min: 50, max: 100 },
            'هزینه بنزین (به ازای هر 3 لیتر)': { min: 0.1, max: 0.15 } // 10 to 15 cents
        };

        const jobCategories = {
            'کارمند': 'متوسط', 'معلم': 'متوسط', 'دانشجو': 'کم', 'آزادکار/فریلنسر': 'متغیر', 'پزشک/پرستار': 'بالا',
            'مهندس': 'بالا', 'راننده': 'کم', 'فروشنده': 'متوسط', 'کارگر': 'کم', 'خانهدار': 'بدون درآمد',
            'بازنشسته': 'متوسط', 'کشاورز': 'متغیر', 'معمار': 'بالا', 'برنامهنویس': 'بالا', 'وکیل': 'بالا',
            'هنرمند': 'متغیر', 'مدیر': 'بالا', 'سرباز/نظامی': 'کم', 'صنعتگر': 'متوسط', 'بیکار': 'بدون درآمد'
        };

        function calculateHypotheticalServices() {
            const dollarRate = parseFloat(document.getElementById('dollarExchangeRateHypothetical').value);
            const monthlyIncomeToman = parseFloat(document.getElementById('hypotheticalBudget').value);
            const userAge = parseInt(document.getElementById('userAge').value);
            const userOccupation = document.getElementById('userOccupation').value;
            const maritalStatus = document.getElementById('maritalStatus').value;
            const childrenCount = maritalStatus === 'متاهل' ? parseInt(document.getElementById('childrenCount').value) : 0;
            const livingArea = document.getElementById('livingArea').value;
            const houseOwnership = document.getElementById('houseOwnership').value;

            if (isNaN(dollarRate) || dollarRate <= 0 || isNaN(monthlyIncomeToman) || monthlyIncomeToman <= 0 ||
                isNaN(userAge) || userAge <= 0 || !userOccupation || !maritalStatus || !livingArea || !houseOwnership ||
                (maritalStatus === 'متاهل' && isNaN(childrenCount))) {
                alert('لطفاً تمامی فیلدهای اطلاعات شخصی و مالی را به درستی وارد کنید.');
                return;
            }

            const monthlyIncomeUSD = monthlyIncomeToman / dollarRate;
            let totalFixedCostsUSD = 0; // Rent, essential living costs

            // Housing Cost
            let rentCostUSD = 0;
            if (houseOwnership === 'مستاجر') {
                if (livingArea === 'شهری') {
                    rentCostUSD = Math.max(150, Math.min(500, monthlyIncomeUSD * 0.3)); // 30% of income, min 150, max 500
                } else { // Rural
                    rentCostUSD = Math.max(50, Math.min(100, monthlyIncomeUSD * 0.2)); // 20% of income, min 50, max 100
                }
            }
            totalFixedCostsUSD += rentCostUSD;

            // Basic food cost (simplified, as general cost)
            // Assuming average basic food for 1 person is 50 USD/month, add 20 USD for spouse, 15 USD for each child
            let basicFoodCostUSD = 50;
            if (maritalStatus === 'متاهل') basicFoodCostUSD += 20;
            basicFoodCostUSD += childrenCount * 15;
            totalFixedCostsUSD += basicFoodCostUSD;
            
            // Transportation cost
            let transportationCostUSD = iranianServiceCostsUSD['هزینه حمل و نقل (ماهانه)'].min;
            if (maritalStatus === 'متاهل') transportationCostUSD = iranianServiceCostsUSD['هزینه حمل و نقل (ماهانه)'].max;
            totalFixedCostsUSD += transportationCostUSD;

            const discretionaryIncomeUSD = monthlyIncomeUSD - totalFixedCostsUSD;
            
            const budgetSuggestionDiv = document.getElementById('budgetSuggestion');
            const budgetSuggestionTitle = budgetSuggestionDiv.querySelector('h3');
            const budgetSuggestionText = budgetSuggestionDiv.querySelector('p');
            const budgetSuggestionList = budgetSuggestionDiv.querySelector('ul');
            budgetSuggestionList.innerHTML = '';

            let suggestedModel = '';

            // Determine income level (simplified)
            let incomeLevel = 'اقتصادی'; // Default
            if (monthlyIncomeUSD >= 300) incomeLevel = 'متعادل';
            if (monthlyIncomeUSD >= 600) incomeLevel = 'رفاهی';

            // Adjust based on marital status and children
            if (maritalStatus === 'متاهل' && childrenCount > 0) {
                if (monthlyIncomeUSD < 500) incomeLevel = 'اقتصادی';
                else if (monthlyIncomeUSD < 1000) incomeLevel = 'متعادل';
                else incomeLevel = 'رفاهی';
            } else if (maritalStatus === 'متاهل') {
                if (monthlyIncomeUSD < 400) incomeLevel = 'اقتصادی';
                else if (monthlyIncomeUSD < 800) incomeLevel = 'متعادل';
                else incomeLevel = 'رفاهی';
            }

            budgetSuggestionTitle.innerText = `تحلیل بودجه شما: پیشنهاد مدل ${incomeLevel}`;
            let adviceHTML = '';
            let recommendations = [];

            switch (incomeLevel) {
                case 'اقتصادی':
                    adviceHTML = `با توجه به <span class="highlight">درآمد و وضعیت زندگی شما</span>، پیشنهاد ما یک مدل اقتصادی برای مدیریت بودجه است. تمرکز بر نیازهای اساسی و هوشمندانه خرج کردن، به شما کمک می‌کند تا بهترین استفاده را از منابع مالی خود داشته باشید.`;
                    recommendations.push(`**پس‌انداز:** حداقل 5% تا 10% از درآمد خود را برای آینده پس‌انداز کنید. حتی مبالغ کوچک هم مهم است.`);
                    recommendations.push(`**غذا:** بیشتر بر آشپزی در خانه و غذاهای مقرون‌به‌صرفه تأکید کنید. می‌توانید ماهیانه یک بار از فست‌فود یا رستوران اقتصادی استفاده کنید.`);
                    recommendations.push(`**تفریح:** تفریحات کم‌هزینه مانند پیاده‌روی، پارک رفتن، مطالعه کتاب‌های رایگان یا گشت و گذار در طبیعت را در برنامه خود قرار دهید.`);
                    recommendations.push(`**حمل و نقل:** از وسایل حمل و نقل عمومی یا دوچرخه استفاده کنید تا در هزینه‌های بنزین صرفه‌جویی شود.`);
                    recommendations.push(`**آموزش:** از منابع آموزشی رایگان یا دوره‌های آنلاین با هزینه پایین بهره ببرید.`);
                    if (discretionaryIncomeUSD < 0) {
                        adviceHTML += `<br><br><span class="highlight">**توجه:**</span> مجموع هزینه‌های ثابت شما از درآمدتان بیشتر است. پیشنهاد می‌شود برای جبران کسری بودجه و جلوگیری از مشکلات مالی، به <span class="highlight">افزایش درآمد (شغل دوم، مهارت‌آموزی)</span> یا <span class="highlight">بازنگری جدی در هزینه‌های ثابت</span> خود بپردازید.`;
                    }
                    break;
                case 'متعادل':
                    adviceHTML = `شما در وضعیت <span class="highlight">متعادلی</span> قرار دارید و می‌توانید هم از زندگی لذت ببرید و هم پس‌انداز کنید. تعادل بین خرج کردن و پس‌انداز کلید موفقیت شماست.`;
                    recommendations.push(`**پس‌انداز:** 15% تا 20% از درآمد خود را پس‌انداز کنید. این مبلغ می‌تواند برای اهداف بلندمدت شما بسیار مؤثر باشد.`);
                    recommendations.push(`**غذا:** می‌توانید هفته‌ای یک بار یا دو بار از رستوران‌های اقتصادی یا فست‌فودهای مورد علاقه خود لذت ببرید.`);
                    recommendations.push(`**تفریح:** علاوه بر تفریحات کم‌هزینه، می‌توانید ماهیانه یک بار به سینما یا استخر بروید. یک سفر کوتاه داخلی در سال نیز می‌تواند عالی باشد.`);
                    recommendations.push(`**آموزش:** روی دوره‌های آموزشی مورد نیاز برای توسعه شغلی خود سرمایه‌گذاری کنید.`);
                    recommendations.push(`**حمل و نقل:** ترکیبی از حمل و نقل عمومی و خودروی شخصی (با مدیریت مصرف بنزین) توصیه می‌شود.`);
                    break;
                case 'رفاهی':
                    adviceHTML = `شما در وضعیت <span class="highlight">رفاهی مناسبی</span> قرار دارید. می‌توانید از امکانات بیشتری بهره‌مند شوید و در عین حال، به پس‌انداز و سرمایه‌گذاری‌های بزرگ‌تر فکر کنید.`;
                    recommendations.push(`**پس‌انداز/سرمایه‌گذاری:** حداقل 20% تا 30% یا بیشتر از درآمد خود را به پس‌انداز و سرمایه‌گذاری‌های هوشمندانه اختصاص دهید.`);
                    recommendations.push(`**غذا:** می‌توانید آزادانه‌تر از رستوران‌ها و کافه‌ها استفاده کنید، از جمله رستوران‌های لوکس‌تر.`);
                    recommendations.push(`**تفریح:** تفریحات متنوع‌تر مانند سفرهای داخلی و خارجی، شرکت در رویدادهای فرهنگی و ورزشی و استفاده منظم از امکانات ورزشی را تجربه کنید.`);
                    recommendations.push(`**آموزش:** در دوره‌های تخصصی و کارگاه‌های پیشرفته شرکت کنید تا مهارت‌هایتان را به روز نگه دارید.`);
                    recommendations.push(`**حمل و نقل:** مدیریت هزینه بنزین همچنان مهم است، اما می‌توانید با آزادی عمل بیشتری از خودروی شخصی استفاده کنید.`);
                    break;
            }

            budgetSuggestionText.innerHTML = adviceHTML;
            recommendations.forEach(rec => {
                const li = document.createElement('li');
                li.innerHTML = rec;
                budgetSuggestionList.appendChild(li);
            });

            document.getElementById('hypotheticalServicesResultDiv').style.display = 'block';
        }

        // Initial setup: On page load, no section is active by default.
        document.addEventListener('DOMContentLoaded', () => {
            // Optional: You can uncomment the line below to show a default section on load
            // showSection('goldCalculator', document.querySelector('.nav-button[data-color="gold"]'));
        });
    </script>
</body>
</html>
